const packages = require('.')
const pluralize = require('pluralize')
const dedent = require('dedent')

console.log(dedent`<!-- auto-generated by render.js -->

# Native Modules

> a list of ${packages.length} JavaScript modules with C++ addons

Find more datasets like this at 
[nice-registry/about](https://github.com/nice-registry/about#datasets).

## How?

This list is created by:

1. Consuming the entire npm registry using [package-stream](http://ghub.io/package-stream).
1. Plucking out packages that depend or devDepend on [nan](http://ghub.io/nan)
1. Sorting results by [average daily downloads](http://ghub.io/download-counts) and [direct dependents](http://ghub.io/dependent-counts) counts.

## Modules

`)

packages
.forEach((pkg, i) => {
  console.log(`${i+1}. [${pkg.name}](http://ghub.io/${pkg.name}) - ${pkg.description} (${pkg.averageDailyDownloads} ${pluralize('download', pkg.averageDailyDownloads)}/day; ${pkg.dependentCounts.totalDirectDependents} ${pluralize('direct dependent', pkg.dependentCounts.totalDirectDependents)})`)
})