{"name":"native-readdir","description":"native readdir(3) and friends for Node.js","version":"1.0.1","dependencies":{"bindings":"^1.2.1","nan":"^2.0.5"},"devDependencies":{"defence-cli":"^2.0.1","node-gyp":"^1.0.3","replace-require-self":"^1.1.1","run-series":"^1.1.4","standard":"^8.0.0","standard-markdown":"^1.2.1"},"engines":{"node":">=0.10.0"},"license":"MIT","os":["!win32"],"repository":"https://github.com/kemitchell/native-readdir.js","scripts":{"build":"node-gyp build","configure":"node-gyp configure","format":"astyle *.cc *.h","lint":"standard && standard-markdown","pretest":"npm run build","test":"defence README.md | replace-require-self | node","install":"node-gyp rebuild"},"gypfile":true,"gitHead":"060a4c8a33de7bc1a78dc216842218ffe97d5890","homepage":"https://github.com/kemitchell/native-readdir.js#readme","versions":[{"number":"0.1.0","date":"2016-09-15T05:40:26.366Z"},{"number":"1.0.0","date":"2016-09-16T00:23:30.655Z"},{"number":"1.0.1","date":"2016-09-16T03:20:56.117Z"}],"readme":"POSIX `readdir(3)` streams directory entries, but, alas, Node.js' `fs.readdir()` calls back with an array.  An array is fine ... unless you've _a massive number of files in the directory_, and want to handle them one at a time.  Frankly, if you want an array, you might as well `scandir(3)`, which is exactly what libuv does.  [There is no `readdir(3)` in `fs.readdir()`.][no-readdir]\n\n[no-readdir]: https://github.com/libuv/libuv/blob/b12624c13693c4d29ca84b3556eadc9e9c0936a4/docs/src/migration_010_100.rst#uv_fs_readdir-rename-and-api-change\n\nThis module builds a very thin native Node.js add-on wrapper around `opendir(3)`, `readdir(3)`, and `closedir(3)` for streaming directory reads.  The binding is a bit clunky, tracking the C-language API.\n\n**Unless you're building a stream, you probably want to use a stream package that in turn uses this package.**\n\nBehold!  A test suite:\n\n```javascript\nvar Reader = require('native-readdir')\nvar fs = require('fs')\nvar path = require('path')\nvar assert = require('assert')\nvar series = require('run-series')\n\n// Create a directory.\nvar directory = '/tmp/example-' + new Date().toISOString()\nfs.mkdirSync(directory)\n\n// Write some files in it.\nfs.writeFileSync(path.join(directory, 'a'), 'Apple')\nfs.writeFileSync(path.join(directory, 'b'), 'Banana')\n\n// Create a readdir object.  Unfortunately, this object encapsulates\n// magic:  The POSIX `DIR` pointer from `opendir(3)`.\nvar reader = new Reader(directory)\nvar entries = []\n\nseries([\n  function (done) {\n    // You must call `.open()`.\n    reader.open(function (error) {\n      assert.ifError(error)\n      done()\n    })\n  },\n  readEntry,\n  readEntry,\n  readEntry,\n  readEntry,\n  function (done) {\n    assert.deepEqual(entries.sort(), ['.', '..', 'a', 'b'])\n    // `.read()` returns `null` on end.\n    reader.read(function (error, entry) {\n      assert.ifError(error)\n      assert.equal(entry, null)\n    })\n  },\n  function (done) {\n    // You must call `.close()`.\n    reader.close(function (error) {\n      assert.ifError(error)\n    })\n  }\n])\n\nfunction readEntry (done) {\n  reader.read(function (error, entry) {\n    assert.ifError(error)\n    assert.equal(typeof entry, 'string')\n    entries.push(entry)\n    done()\n  })\n}\n```\n\nThis package started with Fabian Canas' [node-native-boilerplate]. Fabian was kind enough to license his boilerplate under The MIT License.  I've licensed my code under The MIT License, too.\n\n[node-native-boilerplate]: https://github.com/fcanas/node-native-boilerplate\n","created":"2016-09-15T05:40:26.366Z","modified":"2016-09-16T03:20:56.117Z","lastPublisher":{"name":"kemitchell","email":"kyle@kemitchell.com"},"owners":[{"name":"kemitchell","email":"kyle@kemitchell.com"}],"other":{"_attachments":{},"_from":".","_id":"native-readdir","_nodeVersion":"4.5.0","_npmOperationalInternal":{"host":"packages-16-east.internal.npmjs.com","tmp":"tmp/native-readdir-1.0.1.tgz_1473996053610_0.30637505277991295"},"_npmUser":{"name":"kemitchell","email":"kyle@kemitchell.com"},"_npmVersion":"3.10.6","_rev":"1-83408ddbba43c5d3ee2f3be9097647c0","_shasum":"b1aeeae0c0a561946d702845eafa8dc6f3d68b52","author":{"name":"Kyle E. Mitchell","email":"kyle@kemitchell.com","url":"https://kemitchell.com"},"bugs":{"url":"https://github.com/kemitchell/native-readdir.js/issues"},"directories":{},"dist-tags":{"latest":"1.0.1"},"dist":{"shasum":"b1aeeae0c0a561946d702845eafa8dc6f3d68b52","tarball":"http://registry.npmjs.org/native-readdir/-/native-readdir-1.0.1.tgz"},"maintainers":[{"name":"kemitchell","email":"kyle@kemitchell.com"}],"readmeFilename":"README.md","time":{"modified":"2016-09-16T03:20:56.117Z","created":"2016-09-15T05:40:26.366Z","0.1.0":"2016-09-15T05:40:26.366Z","1.0.0":"2016-09-16T00:23:30.655Z","1.0.1":"2016-09-16T03:20:56.117Z"}}}