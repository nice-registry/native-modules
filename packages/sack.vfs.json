{"name":"sack.vfs","version":"0.1.99301","description":"Node.js VFS Addon","main":"vfs_module.js","private":false,"preferGlobal":true,"keywords":["sqlite","vfs","JSON","JSON6","COM Port","serial","serial port","filesystem","fs","io","files","crypto","hashed","memory mapped","encrypt","decrypt","configuration","options","windows registry","database","sack"],"scripts":{"test":"node vfsTest.js","install":"node-gyp configure build","build":"node-gyp configure build"},"dependencies":{"nan":"^2.5.1"},"gitHead":"de6537ece9baee8f57c8e23ec25b332910d0bdc4","versions":[{"number":"0.0.0","date":"2016-11-29T22:02:06.353Z"},{"number":"0.1.0","date":"2016-11-29T22:03:18.778Z"},{"number":"0.1.1","date":"2016-11-29T22:06:04.332Z"},{"number":"0.1.2","date":"2016-11-29T22:12:48.831Z"},{"number":"0.1.3","date":"2016-11-29T22:19:19.337Z"},{"number":"0.1.5","date":"2016-11-30T18:18:00.063Z"},{"number":"0.1.6","date":"2016-11-30T19:10:37.402Z"},{"number":"0.1.7","date":"2016-11-30T20:11:07.556Z"},{"number":"0.1.8","date":"2016-11-30T20:19:56.872Z"},{"number":"0.1.9","date":"2016-11-30T20:21:41.600Z"},{"number":"0.1.91","date":"2016-11-30T20:24:42.085Z"},{"number":"0.1.92","date":"2016-11-30T20:31:01.490Z"},{"number":"0.1.93","date":"2016-11-30T20:41:12.314Z"},{"number":"0.1.94","date":"2016-11-30T20:45:43.788Z"},{"number":"0.1.96","date":"2016-11-30T22:32:10.094Z"},{"number":"0.1.97","date":"2016-11-30T22:34:09.059Z"},{"number":"0.1.98","date":"2016-12-17T03:23:21.439Z"},{"number":"0.1.990","date":"2016-12-18T21:26:34.105Z"},{"number":"0.1.99200","date":"2017-01-23T03:44:55.949Z"},{"number":"0.1.99202","date":"2017-01-31T00:37:46.970Z"},{"number":"0.1.99203","date":"2017-02-01T18:25:26.859Z"},{"number":"0.1.99204","date":"2017-02-03T00:27:55.995Z"},{"number":"0.1.99205","date":"2017-02-06T18:58:26.421Z"},{"number":"0.1.99206","date":"2017-02-06T20:44:04.233Z"},{"number":"0.1.99207","date":"2017-02-10T01:27:35.495Z"},{"number":"0.1.99209","date":"2017-03-01T19:30:41.038Z"},{"number":"0.1.99210","date":"2017-03-01T20:11:16.859Z"},{"number":"0.1.99211","date":"2017-03-07T03:53:44.750Z"},{"number":"0.1.99212","date":"2017-03-12T09:37:09.560Z"},{"number":"0.1.99213","date":"2017-03-12T11:26:06.788Z"},{"number":"0.1.99214","date":"2017-03-12T12:08:05.263Z"},{"number":"0.1.99216","date":"2017-03-13T23:17:46.143Z"},{"number":"0.1.99217","date":"2017-03-21T01:07:05.564Z"},{"number":"0.1.99218","date":"2017-03-21T01:27:33.260Z"},{"number":"0.1.99219","date":"2017-03-21T02:25:42.053Z"},{"number":"0.1.99220","date":"2017-03-21T02:29:19.488Z"},{"number":"0.1.99221","date":"2017-03-21T02:53:12.747Z"},{"number":"0.1.99222","date":"2017-03-21T03:56:23.763Z"},{"number":"0.1.99223","date":"2017-03-21T18:27:06.497Z"},{"number":"0.1.99224","date":"2017-03-21T19:09:55.750Z"},{"number":"0.1.99226","date":"2017-03-21T20:12:03.652Z"},{"number":"0.1.99227","date":"2017-03-21T21:21:45.123Z"},{"number":"0.1.99229","date":"2017-03-21T22:55:10.119Z"},{"number":"0.1.99230","date":"2017-03-21T23:13:37.523Z"},{"number":"0.1.99231","date":"2017-03-22T04:06:56.274Z"},{"number":"0.1.99232","date":"2017-03-22T18:10:33.870Z"},{"number":"0.1.99233","date":"2017-03-22T18:39:54.059Z"},{"number":"0.1.99234","date":"2017-03-22T19:36:05.287Z"},{"number":"0.1.99235","date":"2017-03-22T20:28:33.819Z"},{"number":"0.1.99236","date":"2017-03-23T07:37:16.029Z"},{"number":"0.1.99237","date":"2017-03-23T18:40:12.281Z"},{"number":"0.1.99238","date":"2017-03-24T18:45:09.125Z"},{"number":"0.1.99239","date":"2017-03-24T20:00:58.268Z"},{"number":"0.1.99240","date":"2017-03-24T20:21:37.968Z"},{"number":"0.1.99241","date":"2017-03-25T01:01:59.017Z"},{"number":"0.1.99242","date":"2017-03-25T15:48:19.214Z"},{"number":"0.1.99244","date":"2017-03-29T22:39:40.772Z"},{"number":"0.1.99245","date":"2017-03-30T17:40:26.565Z"},{"number":"0.1.99246","date":"2017-04-04T18:15:34.831Z"},{"number":"0.1.99247","date":"2017-04-04T18:35:17.403Z"},{"number":"0.1.99248","date":"2017-04-06T22:07:01.514Z"},{"number":"0.1.99249","date":"2017-04-14T06:37:39.944Z"},{"number":"0.1.99250","date":"2017-04-14T22:09:00.247Z"},{"number":"0.1.99251","date":"2017-04-15T07:55:49.845Z"},{"number":"0.1.99252","date":"2017-04-20T14:59:11.954Z"},{"number":"0.1.99253","date":"2017-04-23T00:28:38.914Z"},{"number":"0.1.99254","date":"2017-04-27T04:59:15.788Z"},{"number":"0.1.99255","date":"2017-04-28T08:00:40.428Z"},{"number":"0.1.99256","date":"2017-04-28T08:29:23.832Z"},{"number":"0.1.99257","date":"2017-04-28T13:24:28.587Z"},{"number":"0.1.99258","date":"2017-05-01T02:08:15.972Z"},{"number":"0.1.99259","date":"2017-05-01T07:01:40.818Z"},{"number":"0.1.99260","date":"2017-05-05T07:02:27.692Z"},{"number":"0.1.99262","date":"2017-05-05T07:17:23.894Z"},{"number":"0.1.99263","date":"2017-05-05T07:21:25.638Z"},{"number":"0.1.99264","date":"2017-05-05T07:23:35.300Z"},{"number":"0.1.99265","date":"2017-05-05T07:33:18.514Z"},{"number":"0.1.99266","date":"2017-05-10T10:50:57.499Z"},{"number":"0.1.99267","date":"2017-05-16T23:53:44.149Z"},{"number":"0.1.99268","date":"2017-05-21T11:48:15.755Z"},{"number":"0.1.99269","date":"2017-06-02T02:23:04.064Z"},{"number":"0.1.99270","date":"2017-06-25T08:37:05.907Z"},{"number":"0.1.99271","date":"2017-07-01T00:47:22.156Z"},{"number":"0.1.99272","date":"2017-07-01T00:50:23.697Z"},{"number":"0.1.99273","date":"2017-07-01T00:51:36.391Z"},{"number":"0.1.99274","date":"2017-07-01T04:00:15.244Z"},{"number":"0.1.99275","date":"2017-07-01T04:02:31.311Z"},{"number":"0.1.99276","date":"2017-07-01T04:27:50.100Z"},{"number":"0.1.99277","date":"2017-07-01T10:34:10.490Z"},{"number":"0.1.99278","date":"2017-07-11T13:24:50.986Z"},{"number":"0.1.99279","date":"2017-07-11T13:34:22.751Z"},{"number":"0.1.99280","date":"2017-07-11T13:35:51.901Z"},{"number":"0.1.99281","date":"2017-07-11T14:52:46.370Z"},{"number":"0.1.99282","date":"2017-07-11T16:20:07.927Z"},{"number":"0.1.99283","date":"2017-07-14T07:56:29.445Z"},{"number":"0.1.99284","date":"2017-07-14T08:03:25.194Z"},{"number":"0.1.99285","date":"2017-07-14T08:35:16.640Z"},{"number":"0.1.99286","date":"2017-07-15T03:09:47.001Z"},{"number":"0.1.99287","date":"2017-07-15T03:42:11.860Z"},{"number":"0.1.99288","date":"2017-08-03T17:05:27.498Z"},{"number":"0.1.99289","date":"2017-08-03T18:27:16.429Z"},{"number":"0.1.99290","date":"2017-08-04T08:39:59.605Z"},{"number":"0.1.99291","date":"2017-08-06T20:00:57.938Z"},{"number":"0.1.99292","date":"2017-08-14T11:52:50.647Z"},{"number":"0.1.99293","date":"2017-08-14T12:26:43.809Z"},{"number":"0.1.99294","date":"2017-08-15T00:25:37.101Z"},{"number":"0.1.99295","date":"2017-08-15T07:42:25.775Z"},{"number":"0.1.99296","date":"2017-08-15T07:54:58.272Z"},{"number":"0.1.99298","date":"2017-08-15T08:48:54.107Z"},{"number":"0.1.99299","date":"2017-08-17T20:02:11.133Z"},{"number":"0.1.99300","date":"2017-08-18T04:08:05.326Z"},{"number":"0.1.99301","date":"2017-08-18T07:01:14.712Z"}],"readme":"# sack.vfs\n\n[![Join the chat at https://gitter.im/sack-vfs/Lobby](https://badges.gitter.im/sack-vfs/Lobby.svg)](https://gitter.im/sack-vfs/Lobby?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)[![Build Status](https://travis-ci.org/d3x0r/sack.vfs.svg?branch=master)](https://travis-ci.org/d3x0r/sack.vfs)\n\nNode addon for a custom virtual file system interface.  Also exposes a JSON6 parser, COM/serial port access, Sqlite interface, an option/configuration database built on Sqlite.\nWindows specific registry access for application settings. Vulkan API to be added eventually... \n\n## Requirements\n### npm\n        none\n\n### Centos  \n        yum install gcc-c++ libuuid-devel\n\n\n# Usage\n\n```\nvar vfs = require( 'sack.vfs' );\nvar volume = vfs.Volume( \"MountName\", \"fileName.vfs\" );\nvar file = volume.File( \"filename\" );\nvar fileString = file.read();\nvar fileOut = volume.File( \"filename.out\" );\nfileOut.write( fileString );\n\n```\n\n## Objects\nThis is the object returned from require( 'sack.vfs' );\n\n```\nvfs = {\n    ComPort(comport) - access to com ports.\n    JSON6 - A json parser. (JSON5 Compatible)\n        parse(string) - result with a V8 object created from the json string.  \n        1/2 the speed of Node's parser; no real reason to use this. \n        (3x faster than javascript JSON5 implementation)\n        // var o = vfs.JSON6.parse(s)\n    JSON - A json parser.\n        parse(string) - result with a V8 object created from the json string.  \n        1/2 the speed of Node's parser; no real reason to use this. \n        (3x faster than javascript JSON5 implementation)\n        // var o = vfs.JSON.parse(s)\n    mkdir(pathname) - utility function to make directories which might not exist before volume does; \n            (Volume() auto creates directories now if specified path to filename does not exist)\n            parameters - (pathname)\n                path to create- will created missing parent path parts too.\n    Sqlite(dbName) - an interface to sqlite which can open databases in the volume.\n            parameters - ( databaseName )\n                databaseName maybe a simple ODBC name; if the name ends with .db, it is assumed to be \n                a sqlite database.  If ODBC is not available, it may be assumed that the name will \n                just be a sqlite database name. Extra syntax - if the name starts with a $, then the \n                next word after $ and before the next @ or $ is used to select a sqlite vfs name.\n                ( https://sqlite.org/vfs.html )  \n                if the name is 'sack' then after @ and before the next $ is specified a mounted filesystem name.\n        Sqlite has methods available on it to access native program options.\n        Sqlite.op( opName, defaultValue ) - read/write default option database option.\n        Sqlite.so( opName, newValue ) - write new value to default option database.\n    Volume(mountName,fileName,a,b) - a virtual disk partition that holds files.\n          mountName - the mount name used to mount to volume as a filesystem; it may be referenced \n                later in the string passed to Sqlite.  It may be `null` if it is anonymous mount.\n          if no parameters are passed, a Volume object representing the native filesystem is returned.\n    \n    // windows only\n    registry - an interface to windows registry options\n    \tset( path, value ) - set a new value in the registry\n        get( path )  - get a value from the registry.\n}\n```\n\n\n### Volume Interface \n (result from vfs.Volume())\n```\nVolume = {\n    File(filename) - open a file (returns a new object)\n            (filename) \n                the file to open in the volume.\n    dir() - returns an array of filenames in the volume.\n    exists(file/path name) - boolean if filename exists (as a file or a directory)\n    read(fileName) - read a file from a volume; return an ArrayBuffer with a toString() that returns the buffer as utf8 as a string.\n    readJSON(fileName, callback) - read a file from a volume; calls callback with each object decoded from the file interpreted as JSON (unimplemented)\n    readJSON6(fileName, callback) - read a file from a volume; calls callback with each object decoded from the file interpreted as JSON6.\n    write(fileName,arrayBuffer/string) - writes a string or arraybuffer to a file. \n    Sqlite(database) - an interface to sqlite database in this volume.\n    mkdir - utility function to make directories which might not exist before volume does; (volume auto creates directories now)\n            parameters - (pathname)\n                path to create- will created missing parent path parts too.\n}\n```\n### File Interface opened within a Volume\n (result from vfs.Volume().File())\n```\nFile = {\n    read(size, position) - read from the file; return an ArrayBuffer with a toString method to interpret it as utf8.  Optional parameter\n                           position may set the position to read from.\n    readLine( [position] ) - reads a line from a text file; optional parameter position may set the position to read from.\n    write(arrayBuffer/string) - write data to the file; at the current position\n    writeLine( line [, position] ) - output text to a file; a newline will be automatically appended to the line.\n    seek(pos) - set file position to write\n    trunc() - set file size to the curent file position.\n    ... /*most other methods unimplemented*/\n}\n```\n### Sqlite Interface\n  (result from vfs.Sqlite() or vfs.Volume().Sqlite())\n```\nSqlite = {\n    escape(s) - returns an encoded string for (s) appropriate for the current database.  \n        (may vary encoding based on ODBC drive used; otherwise escapes single quotes for Sqlite)\n    end() - close this database.  Another command on this database will re-open it.\n    transaction() - begin a sql transaction, ```do()``` commands issued after this will be in a transaction.\n    commit() - end a transaction successfully.\n    autoTransact(true/false) - enabled/disable auto transaction features.  \n         A command will begin a transaction, a timer will be set such that \n         if no other command between happens, then a commit will be generated.  \n         So merely doing ```do()``` commands are optimized into transactions.\n    do(command) - execute a sql command\n    op(opName,defaultValue) - get an option from sqlite option database; return defaultValue \n         if not set, and set the option int he database to the default value.\n    getOption(opName,defaultValue) - longer name of 'op'\n    so(opName,value) - set an option in sqlite option database\n    setOption(opName, value) - longer name of 'so'\n    makeTable(tableString) - evalute a sql create table clause, and create or update a table based on its definitions.\n             Additional columns will be added, old columns are untouched, even if the type specified changes.\n             Addtional indexes and constraints can be added...\n             \n    fo(opName) - find an option node under this one (returns null if node doesn't exist)   fo( \"name\" )\n    go(opName) - get an option node      go( \"name\" )\n    eo(callback) - enum option nodes from root of options, takes a callback as a paraemter.\n              eo( callback ) ... the callback parameters get a node and a name.  \n                    The node is another option node that migth be enumerated with eo...\n                    function callback(node,name)  {console.log( \"got\", name, node.value );\n     \n    \n}\n```\n\nexample sql command?\n```\n    var results = sqlite.do(sql);  // do a sql command, if command doesn't generate data result will be true instead of an array\n\n```\n### Option Database\n  (result from vfs.[Volume().Sqlite()/Sqlite()].[fo/go/eo]() or any of these own methods )\n```\nOptionNode = {\n    fo - find an option node under this one (returns null if node doesn't exist)   fo( \"name\" )\n    go - get an option node      go( \"name\" )\n    eo - enum option nodes from root of options  \n                    eo( cb )\n                    function cb( node, name ) { console.log( \"got\", name, node.value ); } \n                    \n    value - set/get current value\n}\n```\n### Registry\n\nregistry = {\n     set( regPath, value );\n     get( regPath );\n}\n\n```\nvar reg = vfs.registry.set( \"HKCU/something\", value );\nvar val = vfs.registry.get( \"HKCU/something\" );\n```\n\n### COM Ports\n   (result from vfs.ComPort() )\n \n```\nComObject = { \n     onRead( callback ) - sets a callback to be called with a uint8Array parameter when data arrives on the port.\n     write( uint8Array ) - write buffer specfied to com port; only accepts uint8array.\n     close() - close the com port.\n}\n\nCOM port settings are kept in the default option database under \n  /comports.ini/COM PORTS/<comName> = 57600,N,8,1,carrier,RTS,rTSflow\n  /comports.ini/<comName>/port timeout = 100 \n\n     the com port settings string is semi-standard DOS string... the first paramaeters, \n         baud, N/E/O/M/S (parity), 8/7 (data bits), 1/2 (stop bits); \n         then the next settings are toggles based on case...\n            [C/c]arrier - enable/disable respect carrier detect to send (lower case is disable)\n            [R/r]TS - enable/disable respect request to send (lower case is disable)\n            [R/r]TSflow - enable/disable using RTS for flow control. (lower case is disable)\n\n    port timeout is how long to wait for idle between sending com data.  \n        (no data received for 100ms, post packet; this gives a slight delay between when the \n         data is received and actually dispatched)\n```\n\n\n\n## Sqlite Usage\n\n\n```\nvar dbName = \"filename.db\";\nvar db = vfs.Sqlite( dbName );\nrows = db.do( \"select * from sqlite_master\" );\nrows.forEach( row=>{\n    console.log( \"row : \", row );\n}\n```\n\ndb.do returns a result set (if any).  It will be an array of objects.  Objects will have fields named that are the names from the sqlite query.  If the name is the same as another, the columns are amalgamated into another array....\n\n```\ndb data...\n\ntable fruits  \nfruit_id name\n1 apple\n2 banana\n3 orange\n\ntable colors\ncolor_id name\n1 yellow\n2 orange\n3 red\n4 green\n\n\ntable fruit_color\nfruit_id color_id\n1 3\n1 4\n2 1\n3 2\n\nSELECT * from fruits join fruit_color join color \n\n[ { fruit_id : [1,1], name: [apple, red], color_id, [3, 3] } \n { fruit_id : [1,1], name: [apple, green], color_id, [4, 4] } \n { fruit_id : [2,2], name: [banana, yellow], color_id, [1, 1] } \n  { fruit_id : [3,3], name: [orange, orange], color_id, [2, 2] } \n ]\n ```\n\n```\n console.log( db.do( 'SELECT * from fruits join fruit_color join color' );\n```\n\n Would probably return soemthing like the above. Numbers will be type Number, strings are strings, and well otherwise that's it.\nI don't know; maybe it's smart enough if it's the same value it doesn't exapnd it to an array.  That was what one MS SQL driver gave me back when I did a join with a ```*```... the joined column's values were put into an array instead of a simple ID... \nThat's why the names from the seaprate tables get put into the same value as an array... If the query were more like\n\n```\nSELECT fruits.fruit_id fruit_id,fruits.name fruit,color.name color,color.color_id color_id from fruits join fruit_color join color\n\n\n[ { fruit_id : 1, fruit: apple,  color:red, color_id:3 } \n { fruit_id : 1, fruit: apple, color:green, color_id:4 } \n { fruit_id : 2, fruit: banana, color:yellow, color_id:1 } \n  { fruit_id : 3, fruit: orange, color:orange, color_id:2 } \n]\n\n```\n \nwhich makes a lot more sense.  and simple queries on well crafted schemas should be pretty straight forward.\n\n## Options\n\n\n### getting options ... ```go()```\n``` javascript\nvar vfs = require( 'sack.vfs' )\nvar db = vfs.Sqlite( 'option.db' );\nvar root = db.go( \"test\" );\nvar tmp;\nvar tmp2;\nvar path = ( tmp = root.go( \"a\" ).go( \"b\" ).go( \"c\" ) );\n\nconsole.log( \"option value is : \", tmp.value, tmp, Object.keys(tmp), Object.getPrototypeOf( tmp ) );\n```\nroot is now an option root.  go ~ getOption.... getOption also exists... but the shorthand is ... short.\ngetOption may be depricated.\n\ntmp is a option 'a/b/c' in the root.  \n\n``` javascript\ntmp.value = \"Default Other Value\";\n```\ngive tmp option a value.\n\n\nThis is diagnostic output in optionTest.js source... it outputs values and tests defaults and when the program restarts it may have new values in some of the keys; tests persistence of the keys (aka can it write the sqlite database)\n```\nconsole.log( \"Initial.. no defaults...\", ( tmp2 = root.go( \"a\" ).go( \"b3\" ).go( \"c2\" ) ).value );\nconsole.log( \"option value is : \", tmp.value, tmp, Object.keys(tmp) );\n\ntmp2.value = \"Set Value\";\nconsole.log( \"after setting value..\",  tmp2.value );\nconsole.log( \"after setting value..\", ( tmp2 = root.go( \"a\" ).go( \"b3\" ).go( \"c2\" ) ).value );\n//setTimeout( ()=>{console.log( \"Wait a second to flush?\") }, 1000 );\n```\n\n### enumerating options  ```eo()```\n\ndb.eo( callback );  Callback is passed option\n``` javascript\n\nvar level =0;\ndb.eo( dumptree )\nfunction dumptree(opt, name){\n        if( name === \".\" ) return;\n        var leader = \"\";\n        for( var n = 0; n < level;n++ ) leader += \"   \";\n        console.log( leader + \"option:\", name );\n        level++;\n        opt.eo( dumptree );\n        level--;\n}\n```\n\n\nThis dumps the option tables internally option4_map, option4_name, option4_value I think are the tables it uses... there is option4_blob which should store ArrayBuffer types... (provide concat operations/block update internal for retry recovery?)\n```\nfunction tick() {\n        console.log( \"dump tables: \\n\"\n                , db.do( \"select * from option4_map\" ) \n                );\n}\ntick();\n```\n\n## RegAccess - windows registry system access....\n\nParses a simple path and assumes last name of path is key to read/write a value to.\nHKCU\nHKLM\nand capital longhand forms of above are supported.\n\n``` javascript\nvar vfs = require( \"./vfs_module.js\" )\n\nfunction update( newVal ) {\n        var oldval = vfs.registry.get( \"HKCU/Software/Freedom Collective/ChangeMe\" );\n        console.log( \"Old Value is:\", oldval );\n        if( oldval != newVal )\n                 vfs.registry.set( \"HKCU/Software/Freedom Collective/ChangeMe\", newVal );\n}\nupdate( Date.now() );\n```\n\nThe above script reads the value, reports what it was, if the old value is not the new value, then write the new value.\nexample was testing a constant like 526.  if typeof value is a number, value is set as a REG_DWORD.  Otherwise it's set as REG_SZ.\n\n\n### JSON( [JSON6](https://www.github.com/d3x0r/json6) ) - JSON and JSON6 compatible processor \n\nSlightly extended json parser to allows simple types to be returned as values, not requiring { or [ to start\nthe JSON input.\n\nSimple values, objects and arrays can result from parsing.  Simple values are true,false,null, Numbers and Strings.\n\nAdded support 'reviver' parameter.\n\n\n  - JSON\n     - parse( string [,reviver] )\n  - JSON6\n     - parse( string [,revivier] )\n     - begin( callback )\n         - write( data )\n\n\n``` javascript\nvar vfs = require( \"sack.vfs\" );\n\nvar object = vfs.JSON.parse(string [, reviver]);\n\nvar object2 = vfs.JSON6.parse(string [, reviver]);\n```\n\n### Streaming JSON Parsing\n\n  - begin(cb)  returns a parser object, pass a callback which receives objects as they are recognized in the stream.\n    - parser.write( data )  Write data to the parser to parse into resulting objects.\n\nSimple values, objects and arrays can result from parsing.\nbecause a streaming input is expected, cannot pass just simple objects to be parsed, because an input of \"1234\" might\nbe just part of a number, and more of the number might be added in the next write.  If there is a trailing newline or other \nwhitespace character after the number, the number will be sent to the callback registered in the begin.\n\n``` javascript\nvar vfs = require( \"sack.vfs\" );\n\nvar parser = vfs.JSON6.begin( objectCallback );\nparser.write( \"123 \" );\nfunction objectCallback( o ) {\n    console.write( \"Received parsed object:\", typeof o, o );\n}\n```\n\n\n## TLS Interface\n\nExposes OpenSSL library functions to create key pairs, cerficates, and certificate chains.\n\n### Interface\n\n```\n  TLS={\n     genkey( length [,password]) - Generates a keypair, returns PEM string.  Requires length parameter, allows optional password to be specified.\n     pubkey( {options} ) - gets public key of a keypair or certificate\n     gencert( { options } ) - Generates a self signed certificate.\n     genreq( {options} ) - Generates a certification request\n     signcert( {options} ) - uses a certificate to sign a certificate request\n     validate( {options} ) - validate a certificate against a certificate chain.\n     expiration( certificate ) - gets the expiration of a certificate as a Date().     \n  }\n```\n - pubkey options\n    - cert : a certificate to get a key from, will not be used if 'key' option is specified.  either this or key MUST be specified, but not both.\n    - key : a keypair to get the public key from.  Either this or cert MUST be specified, but not both.\n    - password : password for keypair if required.\n\n - gencert options\n    - country : specified country of origin; must be a 2 character country specifier.\n    - state : specifies state or province of origin;\n    - locality : specifies city in state specified.\n    - org : specified organization for certificate\n    - orgUnit : specifies organizational unit.\n    - name : specifies common name, this is typically a domain name with possible wildcard at start.\n    - key : private/public key to use\n    - password : if required for key\n    - serial : serial number for this certificate (is a number type).\n    - expire : number of days before this certificate expires (is a number type).\n    - pubkey : override storing the public key of this certificate. (used to test certificate chain validity check; do not use)\n    - issuer : override the issuer/subject identifier of this certificate. (used to test certificate chain validity check; do not use)\n\n  - genreq options\n    - country : specified country of origin; must be a 2 character country specifier.\n    - state : specifies state or province of origin;\n    - locality : specifies city in state specified.\n    - org : specified organization for certificate\n    - orgUnit : specifies organizational unit.\n    - name : specifies common name, this is typically a domain name with possible wildcard at start.\n    - subject : add fields to Subject Alternative Name...  This is an object containing arrays\n       - DNS : a single domain name or an array of domain name strings to add\n       - IP : a single IP address string or an array of IO addresses to add; does support IPv6 addresses.\n    - key : private/public key to use\n    - password : if required for key\n\n - signcert options\n    - signer : certificate to sign with\n    - request : certificate request to sign\n    - expire : number of days this certificate is valid for\n    - key : private key of the signer\n    - password : password of the signer's key.\n    - serial : serial number for this certificate (is a number type).\n    - issuer : used to override issuer identifier. (used to test certificate chain validity check; do not use)\n    - subject : used to override subject identifier. (used to test certificate chain validity check; do not use)\n    - pubkey : used to override the public key stored in the output certificate. (used to test certificate chain validity check; do not use)\n\n - validate options\n    - cert : certificate to validate\n    - chain : concatenated certificate chain to use for validation.  Order does not matter.  Not required if cert is self signed.\n\nSee [tlsTest.js](https://github.com/d3x0r/sack.vfs/blob/master/tlsTest.js) for example usage.\n\n## SRG Module\n\nSalty Random Generator \n\n```\n  var SRG = SaltyRG( salt=>salt.push( new Date() ) )// callback is passed an array to add salt to.\n  var number = SRG.getBits(); // get a signed 32 bit number -  -2,147,483,648  to 2,147,483,647\n```\n\n  - SaltyRG( callback ), SaltyRG( initial_seed ), SaltyRG()\n     callback is called to request more salt.  An array is passed which can have values pushed into it.\n     initial_seed is a seed to use initially, then no callback is called.\n     no parameters results with a generator with no initial seed, and no callback\n     Results with a random_generator object.\n     \n     \n    - seed( toString ) : set the next seed to be used; any value passed is converted to a string.\n    - reset() : reset the generator to base state.\n    - getBits( [bitCount [, signed]] ) : if no parameters are passed, a 32 bit signed integer is returned.  If bitCount \n       is passed, it must be less than 32 bits.  If signed is not passed or is false, the resulting value is the specified\n       number of bits as an unsigned integer, otherwise the top bit is sign extended, and a signed integer results.\n    - getBuffer( bits ) : returns an ArrayBuffer that is the specified number of bits long, rounded up to the next complete\n       byte count.  \n       \n\n```\n  // some examples\n  var vfs = require( \"sack.vfs\" );\n  var SRG = vfs.SaltyRG( salt=>salt.push( new Date() ) )// callback is passed an array to add salt to.\n  \n  var signed_byte = SRG.getBits( 8, true );\n  var unsigned_byte = SRG.getBits( 8 );\n  var someValue = SRG.getBits( 13, true );  // get 13 bits of randomness, sign extended.\n  var buffer = SRG.getBuffer( 1234 ); // get 155 bytes of random data (last byte only has 2 bits )\n```\n\n\n\n## Changelog\n- 0.1.99301 add SaltyRandomGenerator interface.\n- 0.1.99300 fix random generator overflows.\n- 0.1.99299 set default sql auto checkpoint to off.\n- 0.1.99298 add preferGlobal to package.json.\n- 0.1.99297 replace Persistent strings with Eternal, which work on nodev4.\n- 0.1.99296 fix deprecated v8::Delete method to use Maybe version.\n- 0.1.99295 fix build error on older versions of node.\n- 0.1.99294 fix stream paring empty array elements; and a error stream parsing a break between a field label just at the colon.\n","created":"2016-11-29T22:02:06.353Z","modified":"2017-08-18T07:02:13.818Z","lastPublisher":{"name":"d3x0r","email":"d3ck0r@gmail.com"},"owners":[{"name":"d3x0r","email":"d3ck0r@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"sack.vfs","_nodeVersion":"8.2.1","_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/sack.vfs-0.1.99301.tgz_1503039674574_0.7557748768012971"},"_npmUser":{"name":"d3x0r","email":"d3ck0r@gmail.com"},"_npmVersion":"4.0.5","_rev":"235-427ae67e36518414e0a03699d643d8d7","_shasum":"00b22000228ac7c0841dfd62cef7f7fc5fcced1c","directories":{},"dist-tags":{"latest":"0.1.99301"},"dist":{"shasum":"00b22000228ac7c0841dfd62cef7f7fc5fcced1c","tarball":"https://registry.npmjs.org/sack.vfs/-/sack.vfs-0.1.99301.tgz"},"maintainers":[{"name":"d3x0r","email":"d3ck0r@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2017-08-18T07:02:13.818Z","created":"2016-11-29T22:02:06.353Z","0.0.0":"2016-11-29T22:02:06.353Z","0.1.0":"2016-11-29T22:03:18.778Z","0.1.1":"2016-11-29T22:06:04.332Z","0.1.2":"2016-11-29T22:12:48.831Z","0.1.3":"2016-11-29T22:19:19.337Z","0.1.5":"2016-11-30T18:18:00.063Z","0.1.6":"2016-11-30T19:10:37.402Z","0.1.7":"2016-11-30T20:11:07.556Z","0.1.8":"2016-11-30T20:19:56.872Z","0.1.9":"2016-11-30T20:21:41.600Z","0.1.91":"2016-11-30T20:24:42.085Z","0.1.92":"2016-11-30T20:31:01.490Z","0.1.93":"2016-11-30T20:41:12.314Z","0.1.94":"2016-11-30T20:45:43.788Z","0.1.96":"2016-11-30T22:32:10.094Z","0.1.97":"2016-11-30T22:34:09.059Z","0.1.98":"2016-12-17T03:23:21.439Z","0.1.990":"2016-12-18T21:26:34.105Z","0.1.99200":"2017-01-23T03:44:55.949Z","0.1.99202":"2017-01-31T00:37:46.970Z","0.1.99203":"2017-02-01T18:25:26.859Z","0.1.99204":"2017-02-03T00:27:55.995Z","0.1.99205":"2017-02-06T18:58:26.421Z","0.1.99206":"2017-02-06T20:44:04.233Z","0.1.99207":"2017-02-10T01:27:35.495Z","0.1.99209":"2017-03-01T19:30:41.038Z","0.1.99210":"2017-03-01T20:11:16.859Z","0.1.99211":"2017-03-07T03:53:44.750Z","0.1.99212":"2017-03-12T09:37:09.560Z","0.1.99213":"2017-03-12T11:26:06.788Z","0.1.99214":"2017-03-12T12:08:05.263Z","0.1.99216":"2017-03-13T23:17:46.143Z","0.1.99217":"2017-03-21T01:07:05.564Z","0.1.99218":"2017-03-21T01:27:33.260Z","0.1.99219":"2017-03-21T02:25:42.053Z","0.1.99220":"2017-03-21T02:29:19.488Z","0.1.99221":"2017-03-21T02:53:12.747Z","0.1.99222":"2017-03-21T03:56:23.763Z","0.1.99223":"2017-03-21T18:27:06.497Z","0.1.99224":"2017-03-21T19:09:55.750Z","0.1.99226":"2017-03-21T20:12:03.652Z","0.1.99227":"2017-03-21T21:21:45.123Z","0.1.99229":"2017-03-21T22:55:10.119Z","0.1.99230":"2017-03-21T23:13:37.523Z","0.1.99231":"2017-03-22T04:06:56.274Z","0.1.99232":"2017-03-22T18:10:33.870Z","0.1.99233":"2017-03-22T18:39:54.059Z","0.1.99234":"2017-03-22T19:36:05.287Z","0.1.99235":"2017-03-22T20:28:33.819Z","0.1.99236":"2017-03-23T07:37:16.029Z","0.1.99237":"2017-03-23T18:40:12.281Z","0.1.99238":"2017-03-24T18:45:09.125Z","0.1.99239":"2017-03-24T20:00:58.268Z","0.1.99240":"2017-03-24T20:21:37.968Z","0.1.99241":"2017-03-25T01:01:59.017Z","0.1.99242":"2017-03-25T15:48:19.214Z","0.1.99244":"2017-03-29T22:39:40.772Z","0.1.99245":"2017-03-30T17:40:26.565Z","0.1.99246":"2017-04-04T18:15:34.831Z","0.1.99247":"2017-04-04T18:35:17.403Z","0.1.99248":"2017-04-06T22:07:01.514Z","0.1.99249":"2017-04-14T06:37:39.944Z","0.1.99250":"2017-04-14T22:09:00.247Z","0.1.99251":"2017-04-15T07:55:49.845Z","0.1.99252":"2017-04-20T14:59:11.954Z","0.1.99253":"2017-04-23T00:28:38.914Z","0.1.99254":"2017-04-27T04:59:15.788Z","0.1.99255":"2017-04-28T08:00:40.428Z","0.1.99256":"2017-04-28T08:29:23.832Z","0.1.99257":"2017-04-28T13:24:28.587Z","0.1.99258":"2017-05-01T02:08:15.972Z","0.1.99259":"2017-05-01T07:01:40.818Z","0.1.99260":"2017-05-05T07:02:27.692Z","0.1.99262":"2017-05-05T07:17:23.894Z","0.1.99263":"2017-05-05T07:21:25.638Z","0.1.99264":"2017-05-05T07:23:35.300Z","0.1.99265":"2017-05-05T07:33:18.514Z","0.1.99266":"2017-05-10T10:50:57.499Z","0.1.99267":"2017-05-16T23:53:44.149Z","0.1.99268":"2017-05-21T11:48:15.755Z","0.1.99269":"2017-06-02T02:23:04.064Z","0.1.99270":"2017-06-25T08:37:05.907Z","0.1.99271":"2017-07-01T00:47:22.156Z","0.1.99272":"2017-07-01T00:50:23.697Z","0.1.99273":"2017-07-01T00:51:36.391Z","0.1.99274":"2017-07-01T04:00:15.244Z","0.1.99275":"2017-07-01T04:02:31.311Z","0.1.99276":"2017-07-01T04:27:50.100Z","0.1.99277":"2017-07-01T10:34:10.490Z","0.1.99278":"2017-07-11T13:24:50.986Z","0.1.99279":"2017-07-11T13:34:22.751Z","0.1.99280":"2017-07-11T13:35:51.901Z","0.1.99281":"2017-07-11T14:52:46.370Z","0.1.99282":"2017-07-11T16:20:07.927Z","0.1.99283":"2017-07-14T07:56:29.445Z","0.1.99284":"2017-07-14T08:03:25.194Z","0.1.99285":"2017-07-14T08:35:16.640Z","0.1.99286":"2017-07-15T03:09:47.001Z","0.1.99287":"2017-07-15T03:42:11.860Z","0.1.99288":"2017-08-03T17:05:27.498Z","0.1.99289":"2017-08-03T18:27:16.429Z","0.1.99290":"2017-08-04T08:39:59.605Z","0.1.99291":"2017-08-06T20:00:57.938Z","0.1.99292":"2017-08-14T11:52:50.647Z","0.1.99293":"2017-08-14T12:26:43.809Z","0.1.99294":"2017-08-15T00:25:37.101Z","0.1.99295":"2017-08-15T07:42:25.775Z","0.1.99296":"2017-08-15T07:54:58.272Z","0.1.99298":"2017-08-15T08:48:54.107Z","0.1.99299":"2017-08-17T20:02:11.133Z","0.1.99300":"2017-08-18T04:08:05.326Z","0.1.99301":"2017-08-18T07:01:14.712Z"}}}