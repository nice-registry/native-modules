{"name":"jpeg-turbo","version":"0.4.0","description":"Limited libjpeg-turbo bindings for Node.js.","keywords":["jpeg","jpeg-turbo","libjpeg-turbo"],"license":"Apache-2.0","repository":"https://github.com/sorccu/node-jpeg-turbo","main":"./index","dependencies":{"bindings":"^1.2.1","nan":"^2.2.0","node-pre-gyp":"^0.6.19"},"devDependencies":{"aws-sdk":"^2.2.32"},"scripts":{"install":"node-pre-gyp install --fallback-to-build"},"binary":{"module_name":"jpegturbo","module_path":"./lib/binding/{node_abi}-{platform}-{arch}","host":"https://pre-gyp.s3.amazonaws.com","remote_path":"./{module_name}/v{version}"},"gitHead":"6a80b70ad108d9f7dd025d2421d93a08937f747e","homepage":"https://github.com/sorccu/node-jpeg-turbo#readme","bundleDependencies":["node-pre-gyp"],"versions":[{"number":"0.1.1","date":"2015-09-14T18:59:36.073Z"},{"number":"0.2.0","date":"2015-09-21T03:32:33.989Z"},{"number":"0.2.1","date":"2015-09-21T04:01:03.414Z"},{"number":"0.3.0","date":"2015-09-22T01:06:40.742Z"},{"number":"0.3.2","date":"2015-12-02T15:20:00.725Z"},{"number":"0.4.0","date":"2016-01-25T11:21:41.575Z"}],"readme":"# node-jpeg-turbo\n\n[![Build Status](https://travis-ci.org/sorccu/node-jpeg-turbo.svg?branch=master)](https://travis-ci.org/sorccu/node-jpeg-turbo) [![npm](https://img.shields.io/npm/v/jpeg-turbo.svg)]()\n\n**node-jpeg-turbo** provides minimal [libjpeg-turbo](http://libjpeg-turbo.virtualgl.org/) bindings for [Node.js](https://nodejs.org/). It is very, very fast compared to other alternatives, such as [node-imagemagick-native](https://github.com/mash/node-imagemagick-native) or [jpeg-js](https://github.com/eugeneware/jpeg-js).\n\nPlease ask if you need more methods exposed.\n\n## Requirements\n\nWe use [NAN](https://github.com/nodejs/nan) to guarantee maximum v8 API compatibility, so in theory any [Node.js](https://nodejs.org/) or [io.js](https://iojs.org/) version should work fine. For maximum convenience we also use [node-pre-gyp](https://github.com/mapbox/node-pre-gyp) to publish prebuilt binaries for a few common platforms. For example, if you're on OS X and using the latest stable Node, you probably won't need to do a thing.\n\n### If you must build from source\n\nFirst, if you're building from the repo, make sure to init and update submodules or you'll get confusing errors about missing targets when building. We include `libjpeg-turbo` as a submodule.\n\n```bash\ngit submodule init\ngit submodule update\n```\n\n(or just use `git clone --recursive` when cloning the repo)\n\nDue to massive linking pain on Ubuntu, we embed and build `libjpeg-turbo` directly with `node-gyp`. Unfortunately this adds an extra requirement, as the build process needs `yasm` to enable all optimizations. Note that this step is only required for `x86` and `x86_64` architectures. You don't need `yasm` if you're building on `arm`, for example.\n\nHere's how to install `yasm`:\n\n**On OS X**\n\n```bash\nbrew install yasm\n```\n\n**On Ubuntu 14.04**\n\n```bash\napt-get install yasm\n```\n\n**On Ubuntu 12.04**\n\n```bash\napt-get install yasm\n```\n\n**Important!** Ubuntu 12.04 comes with GCC 4.6, which is too old to compile the add-on (and most other modules since Node.js 4.0 was released). More information is available [here](https://github.com/travis-ci/travis-ci/issues/1379).\n\nIf you really must use this module on Ubuntu 12.04, the following may work:\n\n```bash\napt-get install python-software-properties\nadd-apt-repository -y ppa:ubuntu-toolchain-r/test\napt-get -y install g++-4.8\nexport CXX=g++-4.8\n```\n\nRemember to export `CXX` when you `npm install`.\n\n**On Debian**\n\n```bash\napt-get install yasm\n```\n\n**On Alpine Linux**\n\n```bash\napk add yasm\n```\n\n**Others**\n\nSearch your package manager for `yasm`.\n\n## Installation\n\nMake sure you've got the [requirements](#requirements) installed. Then simply install from [NPM](https://www.npmjs.com/):\n\n```bash\nnpm install --save jpeg-turbo\n```\n\n## API\n\n### `jpg.bufferSize(options)` → `Number`\n\nIf you'd like to preallocate a `Buffer` for `jpg.compressSync()`, use this method to get the worst-case upper bound. The `options` argument is fully compatible with the `jpg.compressSync()` method, so that you can pass the same options to both functions.\n\n* **options** is an Object with the following properties:\n  - **width** Required. The width of the image.\n  - **height** Required. The height of the image.\n  - **subsampling** Optional. The subsampling method to use. Defaults to `jpg.SAMP_420`.\n* **Returns** The `Number` of bytes required in a worst-case scenario.\n\n```js\nvar fs = require('fs')\nvar jpg = require('jpeg-turbo')\n\nvar raw = fs.readFileSync('raw.rgba')\n\nvar options = {\n  format: jpg.FORMAT_RGBA,\n  width: 1080,\n  height: 1920,\n  subsampling: jpg.SAMP_444,\n}\n\nvar preallocated = new Buffer(jpg.bufferSize(options))\n\nvar encoded = jpg.compressSync(raw, preallocated, options)\n```\n\n### `jpg.compressSync(raw[, out], options)` → `Buffer`\n\nCompresses (i.e. encodes) the raw pixel data into a JPG. This method is not capable of resizing the image.\n\nFor efficiency reasons you may choose to encode into a preallocated `Buffer`. While fast, it has a number of drawbacks. Namely, you'll have to be careful not to reuse the buffer in async processing before processing (e.g. saving, displaying or transmitting) the entire encoded image. Otherwise you risk corrupting the image. Also, it wastes a huge amount of space compared to on-demand allocation.\n\n* **raw** is a `Buffer` with the raw pixel data in `options.format`.\n* **out** is an optional preallocated `Buffer` for the encoded image. The size of the buffer is checked. See `jpg.bufferSize()` for an example of how to preallocate a sufficient `Buffer`. If not given, memory is allocated and reallocated as needed, which eliminates most of the wasted space but is slower and lacks consistency with varying source images.\n* **options** is an Object with the following properties:\n  - **format** Required. The format of the `raw` pixel data (e.g. `jpg.FORMAT_RGBA`).\n  - **width** Required. The width of the image.\n  - **height** Required. The height of the image.\n  - **subsampling** Optional. The subsampling method to use. Defaults to `jpg.SAMP_420`.\n  - **quality** Optional. The desired JPG quality. Defaults to 80.\n* **Returns** The encoded image as a `Buffer`. Note that the buffer may actually be a slice of the preallocated `Buffer`, if given. _**Be careful not to reuse the preallocated buffer before you've finished processing the encoded image, as it may corrupt the image.**_\n\n```js\nvar fs = require('fs')\nvar jpg = require('jpeg-turbo')\n\nvar raw = fs.readFileSync('raw.rgba')\n\nvar options = {\n  format: jpg.FORMAT_RGBA,\n  width: 1080,\n  height: 1920,\n  subsampling: jpg.SAMP_444,\n}\n\nvar encoded = jpg.compressSync(raw, options)\n```\n\nSee `jpg.bufferSize()` for an example of preallocated `Buffer` usage.\n\n\n### `jpg.decompressSync(image[, out], options)` → `Object`\n\nDecompresses (i.e. decodes) the JPG image into raw pixel data.\n\n* **image** is a `Buffer` with the JPG image data.\n* **out** is an optional preallocated `Buffer` for the decoded image. The size of the buffer is checked, and should be at least `width * height * bytes_per_pixel` or larger. If not given, one is created for you. The only benefit of providing the `Buffer` yourself is that you can reuse the same buffer between multiple `jpg.decompressSync()` calls. Note that this can lead to issues with concurrency. See `jpg.compressSync()` for related discussion.\n* **options** is an Object with the following properties:\n  - **format** Required. The desired format of the `raw` pixel data (e.g. `jpg.FORMAT_RGBA`).\n  - **out** _Deprecated._ Use the `out` argument instead.\n* **Returns** An `Object` with the following properties:\n  - **data** A `Buffer` with the raw pixel data.\n  - **width** The width of the image.\n  - **height** The height of the image.\n  - **subsampling**  The subsampling method used in the JPG.\n  - **size** _Deprecated._ Use `data.length` instead.\n  - **bpp** The number of bytes per pixel.\n\n```js\nvar fs = require('fs')\nvar jpg = require('jpeg-turbo')\n\nvar image = fs.readFileSync('image.jpg')\n\nvar options = {\n  format: jpg.FORMAT_RGBA,\n}\n\nvar decoded = jpg.decompressSync(image, options)\n```\n\n## Thanks\n\n* https://github.com/A2K/node-jpeg-turbo-scaler\n* https://github.com/mash/node-imagemagick-native\n* https://github.com/google/skia/blob/master/gyp/libjpeg-turbo.gyp\n* https://github.com/openstf/android-libjpeg-turbo\n\n## License\n\nSee [LICENSE](LICENSE).\n\nCopyright © Simo Kinnunen. All Rights Reserved.\n","starsCount":1,"created":"2015-09-14T18:59:36.073Z","modified":"2016-01-25T11:21:41.575Z","lastPublisher":{"name":"sorccu","email":"simo@shoqolate.com"},"owners":[{"name":"sorccu","email":"simo@shoqolate.com"}],"other":{"_attachments":{},"_from":".","_id":"jpeg-turbo","_nodeVersion":"5.4.1","_npmUser":{"name":"sorccu","email":"simo@shoqolate.com"},"_npmVersion":"3.3.12","_rev":"1-f147e81cc95a5b9b246b300e640462a9","_shasum":"f6f9f099f9882bad84585c6b1004344d6fadb33c","bugs":{"url":"https://github.com/sorccu/node-jpeg-turbo/issues"},"directories":{},"dist-tags":{"latest":"0.4.0"},"dist":{"shasum":"f6f9f099f9882bad84585c6b1004344d6fadb33c","tarball":"http://registry.npmjs.org/jpeg-turbo/-/jpeg-turbo-0.4.0.tgz"},"maintainers":[{"name":"sorccu","email":"simo@shoqolate.com"}],"readmeFilename":"README.md","time":{"modified":"2016-01-25T11:21:41.575Z","created":"2015-09-14T18:59:36.073Z","0.1.1":"2015-09-14T18:59:36.073Z","0.2.0":"2015-09-21T03:32:33.989Z","0.2.1":"2015-09-21T04:01:03.414Z","0.3.0":"2015-09-22T01:06:40.742Z","0.3.2":"2015-12-02T15:20:00.725Z","0.4.0":"2016-01-25T11:21:41.575Z"},"users":{"webseed":true}}}