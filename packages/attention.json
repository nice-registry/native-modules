{"name":"attention","version":"0.1.1","description":"Detect the dominant palette, salient region and focal point of an image","scripts":{"test":"node ./test/unit.js","accuracy":"cd ./test && VIPS_CONCURRENCY=1 ./accuracy.sh","install":"node-gyp rebuild"},"main":"index.js","repository":"https://github.com/lovell/attention","keywords":["dominant","palette","colour","color","saliency","salient","region","image"],"dependencies":{"nan":"^2.2.0"},"license":"Apache-2.0","engines":{"node":">=0.10"},"gypfile":true,"gitHead":"54097091a6dd680ac3834cf59ff3c1fb48252ae9","homepage":"https://github.com/lovell/attention#readme","versions":[{"number":"0.0.1","date":"2015-01-13T19:53:15.933Z"},{"number":"0.0.2","date":"2015-01-22T14:32:55.220Z"},{"number":"0.0.3","date":"2015-01-23T09:58:37.529Z"},{"number":"0.0.4","date":"2015-01-26T11:35:55.515Z"},{"number":"0.0.5","date":"2015-01-30T22:31:57.084Z"},{"number":"0.0.6","date":"2015-01-31T11:58:20.392Z"},{"number":"0.0.7","date":"2015-02-22T11:36:22.615Z"},{"number":"0.0.8","date":"2015-04-20T17:11:23.419Z"},{"number":"0.1.0","date":"2015-09-18T21:16:51.843Z"},{"number":"0.1.1","date":"2016-02-05T18:49:52.175Z"}],"readme":"# attention\n\nThis is an experimental Node.js module to help you discover which parts of an image draw the focus of human attention.\n\nYou could use this information to modify an image or its surroundings for maximum effect.\n\n## Features\n\n### Dominant Palette\n\nThe dominant palette of an image contains the colours that, if you had to reduce the palette to a fixed number of colours, would still represent the image most clearly to human eyes.\n\nThis should not be confused with the simpler \"average\" colour, often a washed-out brown or grey with a low chroma value.\n\nA typical use case for this feature is to find the most appropriate colours for text and design elements that will appear near a given image, enhancing its appearance.\n\n### Salient Region\n\nHuman eyes are drawn to edges and areas with a high relative contrast.\n\nThis module creates and combines two saliency masks to calculate which region of an image contains edges and stands out more with respect to brightness and colour.\n\n1. Edge detection using the [Sobel operator](http://en.wikipedia.org/wiki/Sobel_operator).\n2. Distance from the \"average\" colour using the [Delta-E 2000](http://en.wikipedia.org/wiki/Color_difference#CIEDE2000) formula.\n\nThe [MSRA Salient Object Database](http://research.microsoft.com/en-us/um/people/jiansun/salientobject/salient_object.htm) was used to discover the best thresholds for each mask.\n\nA typical use case for this feature is to automatically remove less relevant parts of an image when cropping to fit fixed dimensions.\n\n### Focal Point\n\nThis is the most dominant or \"heaviest\" point within the Salient Region.\n\nIt is calculated by finding the midpoint of the total pixel count in each of the horizontal and vertical directions of the saliency mask.\n\nA typical use case for this feature is to automatically centre the most relevant part of an image when cropping/hiding the top and bottom or left and right.\n\n## Installation\n\n\tnpm install attention\n\n### Prerequisites\n\n* Node.js v0.10+\n* [libvips](https://github.com/jcupitt/libvips) v7.42.2+\n\n## Usage\n\n```javascript\nattention('input.jpg')\n  .swatches(1)\n  .palette(function(err, palette) {\n    palette.swatches.forEach(function(swatch) {\n      console.dir(swatch);\n    });\n  });\n```\noutputs:\n```\n{r: 96, g: 73, b: 58, css: '#60493a', ...}\n```\n\n```javascript\nattention('input.jpg')\n  .region(function(err, region) {\n    console.dir(region);\n  });\n```\noutputs:\n```\n{ top: 29, left: 17, bottom: 555, right: 485, ... }\n```\n\n```javascript\nattention('input.jpg')\n  .point(function(err, point) {\n    console.dir(point);\n  });\n```\noutputs:\n```\n{ x: 293, y: 117, ... }\n```\n\n## API\n\n### attention([input])\n\nConstructor to which further methods are chained. `input`, if present, can be one of:\n\n* Buffer containing JPEG, PNG, WebP or TIFF image data, or\n* String containing the filename of an image, with most major formats supported.\n\n### palette(callback)\n\nCalculates the dominant palette for the input image, with the number of colours limited to the value passed to `swatches()`.\n\n`callback` gets the arguments `(err, palette)` where `palette` has the attributes:\n\n* `swatches`: an array of sRGB colours split into integral (0-255) red, green, and blue components as well as a handy `css` String in hex notation.\n* `duration`: the length of time taken to find the palette, in milliseconds.\n\n### swatches(count)\n\nSet `count` to the number of distinct colour swatches required, defaulting to a value of 10.\n\n### region(callback)\n\nCalculates the most salient region of the input image.\n\n`callback` gets the arguments `(err, region)` where `region` contains the edges of the salient region in pixels from the top-left corner of the input:\n\n* `top`\n* `left`\n* `bottom`\n* `right`\n\nThe `region` Object also contains:\n\n* `width`: the width of the input image.\n* `height`: the height of the input image.\n* `duration`: the length of time taken to find the salient region, in milliseconds.\n\n### point(callback)\n\nCalculates the focal point of the input image.\n\n`callback` gets the arguments `(err, point)` where `point` contains the coordinates of the focal point from the top-left corner of the input:\n\n* `x`\n* `y`\n\nThe `point` Object also contains:\n\n* `width`: the width of the input image.\n* `height`: the height of the input image.\n* `duration`: the length of time taken to find the focal point, in milliseconds.\n\n## Thanks\n\nThis module uses John Cupitt's [libvips](https://github.com/jcupitt/libvips) and its marvellous new (2015) C++ API.\n\nIt also includes the source of Dennis Ranke's [ExoQuant](https://github.com/exoticorn/exoquant) colour quantisation library as a submodule, used under the terms of the MIT Licence.\n\n## Licence\n\nCopyright 2015 Lovell Fuller\n\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at [http://www.apache.org/licenses/LICENSE-2.0](http://www.apache.org/licenses/LICENSE-2.0.html)\n\nUnless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n","starsCount":1,"created":"2015-01-13T19:53:15.933Z","modified":"2016-02-05T18:49:52.175Z","lastPublisher":{"name":"lovell","email":"npm@lovell.info"},"owners":[{"name":"lovell","email":"npm@lovell.info"}],"other":{"_attachments":{},"_from":".","_id":"attention","_nodeVersion":"5.5.0","_npmOperationalInternal":{"host":"packages-5-east.internal.npmjs.com","tmp":"tmp/attention-0.1.1.tgz_1454698191214_0.9771530721336603"},"_npmUser":{"name":"lovell","email":"npm@lovell.info"},"_npmVersion":"3.3.12","_rev":"1-2dfd97063a0d22a67592545c39972d5e","_shasum":"506c01278834b8990d1c7f8f63dc6ce54b7e930e","author":{"name":"Lovell Fuller","email":"npm@lovell.info"},"bugs":{"url":"https://github.com/lovell/attention/issues"},"directories":{},"dist-tags":{"latest":"0.1.1"},"dist":{"shasum":"506c01278834b8990d1c7f8f63dc6ce54b7e930e","tarball":"http://registry.npmjs.org/attention/-/attention-0.1.1.tgz"},"maintainers":[{"name":"lovell","email":"npm@lovell.info"}],"readmeFilename":"README.md","time":{"modified":"2016-02-05T18:49:52.175Z","created":"2015-01-13T19:53:15.933Z","0.0.1":"2015-01-13T19:53:15.933Z","0.0.2":"2015-01-22T14:32:55.220Z","0.0.3":"2015-01-23T09:58:37.529Z","0.0.4":"2015-01-26T11:35:55.515Z","0.0.5":"2015-01-30T22:31:57.084Z","0.0.6":"2015-01-31T11:58:20.392Z","0.0.7":"2015-02-22T11:36:22.615Z","0.0.8":"2015-04-20T17:11:23.419Z","0.1.0":"2015-09-18T21:16:51.843Z","0.1.1":"2016-02-05T18:49:52.175Z"},"users":{"zeke":true}}}