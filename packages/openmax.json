{"name":"openmax","version":"1.6.0","description":"Node wrapper for the OpenMAX library","main":"dist/index.js","keywords":["OMX","OpenMAX","Raspberry Pi","typescript","atom"],"typings":"./dist/index.d.ts","dependencies":{"async":"2.0.1","bindings":"~1.2.1","clamp":"^1.0.1","fps":"0.0.3","nan":"^2.4.0","promise":"^7.1.1"},"scripts":{"preinstall":"typings install || exit 0","install":"node-gyp rebuild || exit 0","test":"./node_modules/jasmine/bin/jasmine.js","make":"make -j 4 -C build/"},"repository":"https://github.com/jean343/Node-OpenMAX","license":"MIT","devDependencies":{"jasmine":"^2.5.1","typescript":"^1.7.5"},"gitHead":"09d63b3d12ba3309ec9a40c0b6864c37723ad798","homepage":"https://github.com/jean343/Node-OpenMAX#readme","versions":[{"number":"0.0.1","date":"2015-12-27T20:00:39.586Z"},{"number":"0.0.2","date":"2015-12-27T20:12:39.092Z"},{"number":"0.0.3","date":"2015-12-27T23:50:54.541Z"},{"number":"0.0.4","date":"2015-12-27T23:52:54.597Z"},{"number":"0.1.11","date":"2016-01-06T01:56:56.049Z"},{"number":"1.0.0","date":"2016-03-05T19:40:20.412Z"},{"number":"1.0.1","date":"2016-09-01T01:08:04.977Z"},{"number":"1.1.0","date":"2016-09-06T19:18:20.241Z"},{"number":"1.1.1","date":"2016-09-07T01:02:25.314Z"},{"number":"1.2.0","date":"2016-09-08T00:56:45.313Z"},{"number":"1.3.0","date":"2016-09-09T19:31:23.374Z"},{"number":"1.3.1","date":"2016-09-09T20:39:30.612Z"},{"number":"1.3.2","date":"2016-09-10T02:05:00.887Z"},{"number":"1.4.0","date":"2016-09-11T01:53:49.050Z"},{"number":"1.4.1","date":"2016-09-13T01:05:41.003Z"},{"number":"1.5.0","date":"2016-09-14T02:32:37.019Z"},{"number":"1.6.0","date":"2016-09-17T18:19:55.600Z"}],"readme":"# Node-OpenMAX\r\n\r\n[![NPM version](http://img.shields.io/npm/v/openmax.svg)](https://www.npmjs.org/package/openmax)\r\n\r\nUsing the OMX library in C can be tricky and be a painful experience. I wanted a library which can greatly simplify the process while allowing me to modify any settings such as the H.264 I-frame interval and qp parameter. With this library, any OMX components can be linked with any other components with hardware tunnel or software Node Buffers. With the buffers, we can do data manipulation directly in Node.\r\n\r\nThe goal of this library is to:\r\n- Provide a complete wrapper of the OpenMAX https://www.khronos.org/openmax/ library with auto-generated functions and headers with code signature similar to the C code.\r\n- Add JavaScript modules to link user code and OpenMAX\r\n- Use Node Streams to provide an efficient and simple transport between OMX components.\r\n\r\n### Install ###\r\n```\r\nnpm install --save openmax\r\n```\r\n\r\n## Quick Example\r\n\r\n```javascript\r\nvar fs = require('fs');\r\nvar omx = require('openmax');\r\n\r\nvar VideoDecode = omx.VideoDecode();\r\nvar VideoRender = omx.VideoRender();\r\n\r\nVideoDecode.setVideoPortFormat(omx.Video.OMX_VIDEO_CODINGTYPE.OMX_VIDEO_CodingAVC);\r\n\r\nfs.createReadStream(\"video-LQ.h264\")\r\n    .pipe(VideoDecode)\r\n    .tunnel(VideoRender);\r\n```\r\n\r\n### Run samples ###\r\n\r\nThere are JavaScript and TypeScript samples\r\nTo run the JavaScript samples:\r\n```sh\r\ngit clone https://github.com/jean343/Node-OpenMAX.git\r\ncd Node-OpenMAX/examples/js/\r\nnpm install\r\nnode SimpleVideoDecoderRender\r\n```\r\n\r\nTo run the TypeScript samples:\r\n```sh\r\nnpm install typings\r\ngit clone https://github.com/jean343/Node-OpenMAX.git\r\ncd Node-OpenMAX/examples/ts/\r\nnpm install\r\nnode ./node_modules/typescript/bin/tsc\r\nnode dist/SimpleVideoDecoderRender\r\n```\r\n\r\nSimpleVideoDecoderRenderTunnel\r\nExample to read an H.264 file, decode it using video_decode and tunnel it to the video_render.\r\n\r\nSimpleVideoDecoderBuffer\r\nExample to pipe the RAW YUV to a custom Node.js Stream.\r\n\r\nSimpleVideoDecoderRenderBuffer\r\nExample to pipe the RAW YUV to a custom Node.js Duplex Stream, do in-memory YUV manipulation the pipe the result to the monitor.\r\n\r\nSimpleDecoderEncoder\r\nThis example can be run with pipe or tunnel, the tunnel is faster as the intermediate RAW data doesn't touch Node.\r\nDecodes an H.264 stream, encode it using custom settings of constant QP, write the result to a file then decode this result and display on the screen.\r\n\r\n\r\n### Test with jasmine ###\r\n```\r\nnpm test\r\nnpm run test-watch\r\n```\r\n\r\n### Code samples ###\r\nPipe a file into a VideoDecode then tunnel to the Render\r\n```javascript\r\nfs.createReadStream(\"spec/data/video-LQ.h264\")\r\n  .pipe(VideoDecode)\r\n  .tunnel(VideoRender);\r\n```\r\n\r\nPipe a file to a VideoDecoder, encode it, write the result to a file, decode the result and display it.\r\n```javascript\r\nfs.createReadStream(\"spec/data/video-LQ.h264\")\r\n  .pipe(VideoDecode1)\r\n  .tunnel(VideoEncode)\r\n  .pipe(WriteFileFilter)\r\n  .pipe(VideoDecode2)\r\n  .tunnel(VideoRender);\r\n```\r\n\r\nUse the OMX OMX_GetParameter and OMX_SetParameter to change eCompressionFormat to\r\n```javascript\r\nvar format = VideoDecode.component.getParameter(VideoDecode.component.in_port, omx.Index.OMX_INDEXTYPE.OMX_IndexParamVideoPortFormat);\r\nformat.eCompressionFormat = omx.Video.OMX_VIDEO_CODINGTYPE.OMX_VIDEO_CodingAVC;\r\nVideoDecode.component.setParameter(VideoDecode.component.in_port, omx.Index.OMX_INDEXTYPE.OMX_IndexParamVideoPortFormat, format);\r\n```\r\n\r\nGet the complete OMX_IndexParamPortDefinition\r\n```javascript\r\nvar format = VideoDecode.component.getParameter(VideoDecode.component.out_port, omx.Index.OMX_INDEXTYPE.OMX_IndexParamPortDefinition);\r\n// Outputs\r\n{\r\n  eDir: 1,\r\n  nBufferCountActual: 1,\r\n  nBufferCountMin: 1,\r\n  nBufferSize: 3133440,\r\n  bEnabled: 0,\r\n  bPopulated: 0,\r\n  eDomain: 1,\r\n  video: {\r\n    pNativeRender: false,\r\n    nFrameWidth: 1920,\r\n    nFrameHeight: 1080,\r\n    nStride: 1920,\r\n    nSliceHeight: 1088,\r\n    nBitrate: 0,\r\n    xFramerate: 0,\r\n    bFlagErrorConcealment: 0,\r\n    eCompressionFormat: 0,\r\n    eColorFormat: 20,\r\n    pNativeWindow: false\r\n  }\r\n}\r\n```\r\n\r\n### Project ideas ###\r\nThis project was started with the idea of transcoding H.264 videos, converting it to and from JPEGs. But so much more can be done with the OMX library, Please let me know what you are up to and we can write a module to make this task simpler.\r\nHere is a list of ideas, who is interested?\r\n- Video transcoding\r\n- RTSP integration\r\n- FFMPEG integration\r\n- YUV -> RGB conversion\r\n- Remote desktop client or server\r\n- CCTV camera MJPEG -> H.264 and H.264 -> MJPEG\r\n- Video viewer like omxplayer but with complete setting control\r\n- PI Camera\r\n - Connection, grabbing, encoding\r\n - Face detection on the PI camera\r\n- Anything with the YUV / RGB stream such as Video analytics\r\n\r\n### Why Node ###\r\nThe Open MAX library uses heavily Buffers, asynchronous code and this is a perfect fit for Node. Getting emptyBufferDoneCallback and EventPortSettingsChanged right in C is quite difficult. Node pipes have proven to be a good fit for the data flow. Finally, Node is great at networking and lots of OMX buffer in or out are likely to go onto the network.\r\n\r\n### NOTES ###\r\nThe list of components for the Raspberry PI is at http://home.nouwen.name/RaspberryPi/documentation/ilcomponents/\r\nIt has only been tested with the Raspberry PI. If you have another hardware supporting Open MAX, I would love to know.\r\n\r\n### Contribute ###\r\nWant to be part of the project? Great! All are welcome! We will get there quicker together :)\r\nWhether you find a bug, have a great feature request feel free to get in touch.\r\n","created":"2015-12-27T20:00:39.586Z","modified":"2016-09-17T18:19:55.600Z","lastPublisher":{"name":"jean343","email":"bergeron.jeanphilippe@gmail.com"},"owners":[{"name":"jean343","email":"bergeron.jeanphilippe@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"openmax","_nodeVersion":"5.4.0","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/openmax-1.6.0.tgz_1474136395351_0.9494790628086776"},"_npmUser":{"name":"jean343","email":"bergeron.jeanphilippe@gmail.com"},"_npmVersion":"3.3.12","_rev":"1-1fe20c170497a0217eeec8317132d4bf","_shasum":"6f0955d0904dc3ec8789a5bb26ab4b3c534da87f","author":{"name":"Jean-Philippe Bergeron"},"bugs":{"url":"https://github.com/jean343/Node-OpenMAX/issues"},"directories":{},"dist-tags":{"latest":"1.6.0"},"dist":{"shasum":"6f0955d0904dc3ec8789a5bb26ab4b3c534da87f","tarball":"http://registry.npmjs.org/openmax/-/openmax-1.6.0.tgz"},"maintainers":[{"name":"jean343","email":"bergeron.jeanphilippe@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2016-09-17T18:19:55.600Z","created":"2015-12-27T20:00:39.586Z","0.0.1":"2015-12-27T20:00:39.586Z","0.0.2":"2015-12-27T20:12:39.092Z","0.0.3":"2015-12-27T23:50:54.541Z","0.0.4":"2015-12-27T23:52:54.597Z","0.1.11":"2016-01-06T01:56:56.049Z","1.0.0":"2016-03-05T19:40:20.412Z","1.0.1":"2016-09-01T01:08:04.977Z","1.1.0":"2016-09-06T19:18:20.241Z","1.1.1":"2016-09-07T01:02:25.314Z","1.2.0":"2016-09-08T00:56:45.313Z","1.3.0":"2016-09-09T19:31:23.374Z","1.3.1":"2016-09-09T20:39:30.612Z","1.3.2":"2016-09-10T02:05:00.887Z","1.4.0":"2016-09-11T01:53:49.050Z","1.4.1":"2016-09-13T01:05:41.003Z","1.5.0":"2016-09-14T02:32:37.019Z","1.6.0":"2016-09-17T18:19:55.600Z"}}}