{"name":"swipl","version":"1.0.3","main":"index.js","description":"A node.js interface to the SWI-Prolog.","keywords":["swi","prolog","swipl","logic"],"license":"LGPL-3.0","repository":"https://github.com/rla/node-swipl","engines":{"node":">= 7"},"scripts":{"postinstall":"node scripts/store_plbase.js","test":"node-gyp configure build && mocha tests/bridge.js tests/simple.js tests/consult.js","install":"node-gyp rebuild"},"dependencies":{"nan":"^2.4.0"},"devDependencies":{"mocha":"^3.2.0","node-gyp":"^3.6.0"},"files":["src","lib","tests","scripts","binding.gyp","index.js","LICENSE.txt","package.json","README.md","AUTHORS"],"gypfile":true,"gitHead":"e2693a5a65f666538894f58c7657e81eda80624f","homepage":"https://github.com/rla/node-swipl#readme","versions":[{"number":"1.0.0","date":"2017-04-21T23:34:50.453Z"},{"number":"1.0.2","date":"2017-04-21T23:47:50.063Z"},{"number":"1.0.3","date":"2017-04-21T23:54:06.516Z"}],"readme":"# node-swipl\n\nA Node.js interface to the SWI-Prolog.\n\n[![Build Status](https://travis-ci.org/rla/node-swipl.svg?branch=master)](https://travis-ci.org/rla/node-swipl)\n\nInstallation:\n\nYou need to have SWI-Prolog installed and `swipl` binary available in\n`PATH` and compiler installed. See \"Platform support\" for operating system\nsupport. The library requires Node.js version 7+ and SWI-Prolog 6+.\n\n```\nnpm install swipl\n```\n\nAlso see \"Known issues\" for currently unsolved problems.\n\n## Usage\n\nCalling a predicate and returning bindings with\nthe first solution:\n\n```js\nconst swipl = require('swipl');\nconst ret = swipl.call('member(X, [1,2,3,4])');\nif (ret) {\n    console.log(`Variable X value is: ${ret.X}`);\n} else {\n    console.log('Call failed.');\n}\n```\n\nOutputs:\n\n```\nVariable X value is: 1\n```\n\nCalling a predicate and returning all solutions:\n\n```js\nconst swipl = require('swipl');\nconst query = new swipl.Query('member(X, [1,2,3,4])');\nlet ret = null;\nwhile (ret = query.next()) {\n    console.log(`Variable X value is: ${ret.X}`);\n}\n```\n\nOutputs:\n\n```\nVariable X value is: 1\nVariable X value is: 2\nVariable X value is: 3\nVariable X value is: 4\n```\n\nThere can be only one query open at a time.\n\n### Create modules and specify context\n\nUse module operator `:` to call code in different\nmodules. The default call assumes the `user` module.\n\n```js\nswipl.call('assert(mymodule:test(1))');\nconsole.log(swipl.call('mymodule:test(X)'));\n```\n\n### Consult external files\n\nLoad code from external files. You might have\nto set the working directory if you want to use relative paths.\n\n```js\nswipl.call('working_directory(_, prolog)');\nswipl.call('consult(mycode)');\n```\n\n### Constructing safe queries\n\nQueries with data requiring proper escaping can be constructed\nby using helper functions from swipl.term.\n\nExample:\n\n```js\nconst swipl = require('./');\nconst { list, compound, variable, serialize } = swipl.term;\n\nconst escaped = serialize(\n    compound('member', [\n        variable('X'),\n        list([1, 2, 3, 4])]));\n\nconsole.log(swipl.call(escaped));\n```\n\nBlobs and dicts are not supported.\n\n### Output term representation\n\nProlog terms in variable bindings are converted into\nJavaScript objects under the following rules:\n\n * Integers are converted to numbers.\n * Floats are converted to numbers.\n * Atoms and strings are converted to strings.\n * Empty list is converted to string `[]`.\n * List head tail pair is converted to object `{ head, tail }` where\n   `head` and `tail` are converted terms.\n * Compound term is converted to object `{ name, args }` where\n   `name` is the compound functor name and `args` is the array\n   of converted argument terms.\n * Blobs and dicts are not supported and will throw an error.\n\n### Error handling\n\nSyntax errors in queries are thrown. Error messages\nare read from the prolog. The current query is automatically\nclosed.\n\nInvalid query example: `member(X, [1,2,3,4]` (missing closing paren):\n\n```js\nswipl.call('member(X, [1,2,3,4]');\n```\n\nThrows error with message:\n\n```\nError: Error during query execution. Syntax error:\nOperator expected\nmember(X, 1,2,3,4\n** here **\n```\n\nKnown errors are thrown with the error message.\n\n```js\nswipl.call('error:must_be(ground, _)');\n```\n\nThrows error with message:\n\n```\nError: Error during query execution. Arguments are\nnot sufficiently instantiated.\n```\n\nCustom errors without a message are thrown with JavaScript\nerror containing the error term:\n\n```js\nswipl.call('throw(error(test))');\n```\n\nThrows error with message:\n\n```\nError: Error during query execution. Unknown message: error(test).\n```\n\n### Disable autoinitialization\n\nThe embedded SWI-Prolog engine is automatically initialized\nwhen creating the first query. This behavior can be disabled\nby calling `swipl.autoInitialise(false)` before any query is\nexecuted. The engine can be initialized later manually with\nthe `swipl.initialise()` function.\n\n## Platform support\n\nThe bindings are tested on various Linux distributions, on Windows,\nand on MacOS. SWI-Prolog command `swipl` must be available in `PATH`\non all of these operating systems.\n\n### Windows\n\nMicrosoft build tools must be installed:\n\n```\nnpm install --global --production windows-build-tools\n```\n\nSWI-Prolog command `swipl` must be available in `PATH`.\n\n### MacOS\n\nSWI-Prolog must be installed or compiled through Macports. This is\ndescribed here <http://www.swi-prolog.org/build/macos.html>. The setup was\ntested on MacOS Sierra by installing dependencies from ports and compiling\nwith prefix `/usr/local` (adjust `build.templ`).\n\n## Known issues\n\n * Unicode data cannot be exchanged.\n * Exporting PL_BLOB terms is not handled.\n * Exporting PL_DICT terms is not supported. It is not supported at all by SWI-Prolog\n   foreign interface.\n * Installed files cannot be copied around on *nix. The linker has `libswipl` location\n   specified absolutely in the binding object file. The location of `SWI_HOME_DIR` is\n   determined install-time and written into the file `plbase.conf`.\n * Attempt to use native SWI packages leads to symbol lookup errors\n   like `readutil.so: undefined symbol: PL_new_atom`.\n * Custom initialization parameters are not yet implemented.\n\n## Development\n\nA list of helpful resources:\n \n * SWI-Prolog Foreign Interface documentation: <http://www.swi-prolog.org/pldoc/man?section=foreign>\n * Node.js native addons: <https://nodejs.org/api/addons.html>\n * PySWIP sources: <https://code.google.com/archive/p/pyswip/>\n\n## Alternatives\n\n * [Pengines package][pengines-package].\n * Run SWI as HTTP server and create a JSON API.\n\n[pengines-package]:https://www.npmjs.com/package/pengines\n\n## Authors\n\nPlease see the AUTHORS file.\n\n## License\n\nLicensed under LGPL 3.0. A copy is available in [the LICENSE.txt file](LICENSE.txt).\nFile `lib/serialize_string.js` is ported from the [pengines][pengines] project and is licensed\nunder BSD (see the file header).\n\n[pengines]:https://github.com/SWI-Prolog/pengines\n","starsCount":1,"created":"2017-04-21T23:34:50.453Z","modified":"2017-06-09T04:34:00.729Z","lastPublisher":{"name":"rla","email":"info@rlaanemets.com"},"owners":[{"name":"rla","email":"info@rlaanemets.com"}],"other":{"_attachments":{},"_from":".","_id":"swipl","_nodeVersion":"7.8.0","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/swipl-1.0.3.tgz_1492818844548_0.6889084181748331"},"_npmUser":{"name":"rla","email":"info@rlaanemets.com"},"_npmVersion":"4.2.0","_rev":"4-7eff970584c8c90e81c8a252ffd22fee","_shasum":"b08789c9fea15c05a3c9fffaf3ec27ca2a6bad02","bugs":{"url":"https://github.com/rla/node-swipl/issues"},"contributors":[{"name":"Tom Klonikowski","email":"klonik_t@informatik.haw-hamburg.de"},{"name":"Jan Segre"},{"name":"Dmitry Soloviev"},{"name":"Johny Jose","email":"johny@playlyfe.com"},{"name":"Raivo Laanemets","email":"info@rlaanemets.com"}],"directories":{"src":"src","tests":"tests"},"dist-tags":{"latest":"1.0.3"},"dist":{"shasum":"b08789c9fea15c05a3c9fffaf3ec27ca2a6bad02","tarball":"https://registry.npmjs.org/swipl/-/swipl-1.0.3.tgz"},"maintainers":[{"name":"rla","email":"info@rlaanemets.com"}],"readmeFilename":"README.md","time":{"modified":"2017-06-09T04:34:00.729Z","created":"2017-04-21T23:34:50.453Z","1.0.0":"2017-04-21T23:34:50.453Z","1.0.2":"2017-04-21T23:47:50.063Z","1.0.3":"2017-04-21T23:54:06.516Z"},"users":{"logicmoo":true}}}