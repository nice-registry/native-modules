{"name":"ip2location-native","description":"native IP2Location library for node.js","keywords":["geo","ip2geo","ip2location"],"version":"1.1.3","license":"LGPL-3.0","homepage":"https://github.com/advertine/node-ip2location","repository":"https://github.com/advertine/node-ip2location","scripts":{"test":"tap test/test.js test/test.dropin.js","install":"node-gyp rebuild"},"main":"index.js","engines":{"node":">=0.10.0"},"dependencies":{"nan":"^2.4.0"},"devDependencies":{"tap":"*","ben":"*","ip2location-nodejs":"*"},"gypfile":true,"gitHead":"4dd4d463b563e7e67aa4966f1a25c30bd7d8a7b9","versions":[{"number":"1.0.0","date":"2015-02-19T03:40:07.885Z"},{"number":"1.0.1","date":"2015-02-19T14:58:07.586Z"},{"number":"1.0.2","date":"2015-02-19T16:58:51.474Z"},{"number":"1.0.3","date":"2015-03-26T01:11:42.476Z"},{"number":"1.0.4","date":"2015-04-03T00:21:19.570Z"},{"number":"1.0.5","date":"2015-04-05T18:57:12.015Z"},{"number":"1.0.6","date":"2015-06-17T15:24:52.365Z"},{"number":"1.1.0","date":"2015-09-19T16:49:34.820Z"},{"number":"1.1.1","date":"2015-09-20T20:29:49.368Z"},{"number":"1.1.2","date":"2016-05-13T21:38:24.014Z"},{"number":"1.1.3","date":"2016-09-07T00:47:07.368Z"}],"readme":"Native IP2Location library for node.js\n======================================\n\nThis library is a complete re-write of IP2LOCATION database client.\nBuilt for speed.\n\n[![NPM][NPM img]][NPM Status]\n\n[![Build Status][BS img]][Build Status]\n\nData structures learnt from the IP2Location C library:\n\nhttp://www.ip2location.com/developers/c-7\n\nSample binary databases are available [here][ip2Location-devel-db].\n\nInstallation\n------------\n\n    npm install ip2location-native\n\nUsage\n-----\n\n```js\n    Location = require('ip2location-native')\n    location = new Location('path/to/ip2location_database.bin', 'mmap')\n\n    location.query('8.8.8.8')\n    { country_short: ....,\n      country_long: ....,\n      region: ....,\n      city: ....,\n      latitude: ....,\n      longitude: ....,\n      elevation: .... }\n\n    # retrieve only country short, latitude and longitude\n    location.query('8.8.8.8', Location.COUNTRY_SHORT | Location.LATITUDE | Location.LONGITUDE)\n    { country_short: ....,\n      latitude: ....,\n      longitude: .... }\n\n    # query binary ip\n    location.query( new Buffer([8,8,4,4]) )\n\n    # free resources\n    location.close()\n```\n\nCaching\n-------\n\nThe second, optional constructor argument configures database access mode.\nThe default mode is \"file\" - without caching. It conserves memory but reading\nis done with blocking IO.\n\n* \"cache\" loads the whole database into a local memory:\n\n```js\n    location = new Location('path/to/ip2location_database.bin', 'cache')\n    location.mode == \"cache\"\n```\n\n* \"mmap\" maps database file into memory shared between processes:\n\n```js\n    location = new Location('path/to/ip2location_database.bin', 'mmap')\n    location.mode == \"mmap\"\n```\n\n* \"shared\" loads whole database into named shared memory:\n\n```js\n    location = new Location('path/to/ip2location_database.bin', 'shared')\n    location.mode == \"shared\"\n```\n\nEvery other process calling `new Location(dbname, \"shared\")` will try to re-open\nexisting shared memory.\n\nThe default name used for the shared memory is \"/IP2location_Shm\".\nHowever you are free to pick another (the name must begin with a slash - \"/\")\n\n```js\n    location = new Location('path/to/ip2location_database.bin', '/MyDatabase1')\n    location.mode == \"shared\"\n    location.info().sharedname == \"/MyDatabase1\"\n```\n\n#### On POSIX sytems:\n\nA call to `location.close()` will not delete the shared memory, it will only\ndetach process from it. To delete the shared memory call:\n\n```js\n    location.deleteShared()\n```\n\nBefore `close()`.\nWhen `deleteShared` is called, and if any other process is attached to the\nshared memory, the function will only delete the inode of the shared memory.\nThe other processes will continue to use the shared memory and it will be freed\nonly after the last process is detached from it (closes database).\n\nPlease refer to `shm_open` and `shm_unlink` man pages for more info.\n\n#### On Windows:\n\nLast process calling `location.close()` will delete the shared memory.\n\nPerformance\n-----------\n\nOn tested system the library in default IO mode with IP2LOCATION-LITE-5\ndatabase spends on average 25µs per ip lookup returning all available record\nentities. With caching enabled it speeds up to 5µs / lookup (~200 000 / s).\n\nThis is about at least 200 times faster then the pure js [IP2Location module][ip2location-nodejs-github].\nFurther speed up is available by limiting the set of fields retrieved from\nthe database with the second argument to `query()`.\n\n```\nnode test/bench IP2LOCATION-DATABASE.BIN access_mode iterations mask\n```\n\nResilient database access\n-------------------------\n\nThe library takes additional precaution when dealing with database files.\nThe format verification routine prevents accessing wrong format or corrupted\nfiles.\n\nDrop-in replacement\n-------------------\n\nThe drop-in module allows you to replace the official [IP2Location library][ip2location-nodejs]\nwithout touching your code, except for:\n\n```js\n    var ip2location = require('ip2location-native/dropin')\n\n    ip2location.IP2Location_init('path/to/ip2location_database.bin')\n    ip2location.IP2Location_get_all('8.8.8.8')\n```\n\nDatabase dictionary\n-------------------\n\nDo you want to know all available unique location property values?\nSorted, grouped by property type and structured? No problem.\nWith this module it's possible to dump database dictionaries using\n`createDictionary([FIELD_MASK])` method.\n\n```js\n  var dict = location.createDictionary(Location.COUNTRY_LONG|Location.REGION|Location.CITY)\n  dict._index.indexOf('PL') == 174\n  dict.PL.country_long == 'Poland'\n  dict.PL.region._index.indexOf('Mazowieckie') == 6\n  dict.PL.region.Mazowieckie.indexOf('Warsaw') == 251\n```\n\nNotes\n-----\n\nThis module was tested on Linux (x64), OS X, FreeBSD and MS Windows (x64 and x86) with\nnode v0.10, v0.11, v0.12, iojs-3, v4, v5 and v6.\n\nLicence\n-------\n\nLGPL-3.0\n\n[Build Status]: https://travis-ci.org/advertine/node-ip2location\n[BS img]: https://travis-ci.org/advertine/node-ip2location.svg\n[NPM img]: https://nodei.co/npm/ip2location-native.png?compact=true\n[NPM Status]: https://nodei.co/npm/ip2location-native/\n[ip2location-nodejs]: http://www.ip2location.com/developers/nodejs\n[ip2location-nodejs-github]: https://github.com/ip2location-nodejs/IP2Location\n[ip2Location-devel-db]: http://www.ip2location.com/developers#sample_ip2location_databases_bin\n","starsCount":2,"created":"2015-02-19T03:40:07.885Z","modified":"2016-12-18T16:50:29.333Z","lastPublisher":{"name":"advertine","email":"royal@advertine.com"},"owners":[{"name":"advertine","email":"royal@advertine.com"}],"other":{"_attachments":{},"_from":".","_id":"ip2location-native","_nodeVersion":"0.12.7","_npmOperationalInternal":{"host":"packages-16-east.internal.npmjs.com","tmp":"tmp/ip2location-native-1.1.3.tgz_1473209226329_0.6958087617531419"},"_npmUser":{"name":"advertine","email":"royal@advertine.com"},"_npmVersion":"2.13.0","_rev":"2-2409fb8ee0e0705c81e73adffcacaf61","_shasum":"a7a784a7cd7b550de6a0c046b105d69f3af2100a","author":{"name":"Rafał Michalski","email":"royal@advertine.com"},"bugs":{"url":"https://github.com/advertine/node-ip2location/issues"},"contributors":[],"directories":{},"dist-tags":{"latest":"1.1.3"},"dist":{"shasum":"a7a784a7cd7b550de6a0c046b105d69f3af2100a","tarball":"http://registry.npmjs.org/ip2location-native/-/ip2location-native-1.1.3.tgz"},"maintainers":[{"name":"advertine","email":"royal@advertine.com"}],"readmeFilename":"README.md","time":{"modified":"2016-12-18T16:50:29.333Z","created":"2015-02-19T03:40:07.885Z","1.0.0":"2015-02-19T03:40:07.885Z","1.0.1":"2015-02-19T14:58:07.586Z","1.0.2":"2015-02-19T16:58:51.474Z","1.0.3":"2015-03-26T01:11:42.476Z","1.0.4":"2015-04-03T00:21:19.570Z","1.0.5":"2015-04-05T18:57:12.015Z","1.0.6":"2015-06-17T15:24:52.365Z","1.1.0":"2015-09-19T16:49:34.820Z","1.1.1":"2015-09-20T20:29:49.368Z","1.1.2":"2016-05-13T21:38:24.014Z","1.1.3":"2016-09-07T00:47:07.368Z"},"users":{"onufrienko":true,"chrisyipw":true}}}