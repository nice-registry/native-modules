{"name":"forex.analytics","version":"0.0.14","description":"Performs data anaylsis on a set of candlesticks and using available indicators constructs the best strategy which worked on a certain period.","main":"index.js","engines":{"node":">= 4.0.0"},"repository":"https://github.com/mkmarek/forex.analytics","scripts":{"preinstall":"node ./lib/ta-lib/build.js","postinstall":"node-gyp configure && node-gyp build","clean":"node ./lib/ta-lib/clean.js","test":"node mocha"},"gypfile":true,"keywords":["forex","analytics","genetic","algorithm"],"license":"MIT","dependencies":{"nan":"^2.2.0"},"devDependencies":{"chai":"^3.5.0","fs-readdir-recursive":"^1.0.0","mocha":"^2.4.5"},"gitHead":"50a237d32b6b4a716682f23554dcc1c6aac6070e","homepage":"https://github.com/mkmarek/forex.analytics#readme","versions":[{"number":"0.0.1","date":"2016-03-06T20:15:08.954Z"},{"number":"0.0.2","date":"2016-03-06T20:25:19.404Z"},{"number":"0.0.3","date":"2016-03-06T20:33:05.912Z"},{"number":"0.0.4","date":"2016-03-07T16:25:21.761Z"},{"number":"0.0.5","date":"2016-03-07T16:33:23.083Z"},{"number":"0.0.6","date":"2016-03-10T20:15:21.941Z"},{"number":"0.0.7","date":"2016-03-10T21:20:15.133Z"},{"number":"0.0.9","date":"2016-04-25T16:40:55.980Z"},{"number":"0.0.10","date":"2016-04-28T16:36:49.849Z"},{"number":"0.0.11","date":"2016-04-28T17:02:53.294Z"},{"number":"0.0.12","date":"2016-04-28T17:32:28.799Z"},{"number":"0.0.13","date":"2016-04-28T20:07:22.668Z"},{"number":"0.0.14","date":"2016-05-07T11:33:45.218Z"}],"readme":"Forex analytics native module for Node.js\n==========\n[![Build Status](https://travis-ci.org/mkmarek/forex.analytics.svg?branch=master)](https://travis-ci.org/mkmarek/forex.analytics)\n[![npm version](https://badge.fury.io/js/forex.analytics.svg)](https://badge.fury.io/js/forex.analytics)\n\nNode.js native library performing technical analysis over an OHLC dataset with use of genetic algorithm. The result of technical analysis are two binary trees describing strategies for buy and sell signals\nwhich produced profit in a certain period of time specified by the input OHLC data set.\n\nRunning the source\n---------------\n\nFirst if you don't have it yet. Install node-gyp for comiling the c++ source code;\n\n```\nnpm install -g node-gyp\n```\n\nThen run the install npm command to download and install all dependencies. It also compiles\nthe ta-lib dependency and builds the source code\n\n```\nnpm install\n```\n\nTo do further builds you can use\n\n```\nnode-gyp build\n```\n\nYou can run embedded examples which are located in the examples folder\n\n```\ncd examples\nnode example\n```\n\nNPM\n---------------\nYou can install forex.analytics via npm:\n\n```\nnpm install forex.analytics\n```\n\n\nUsage\n---------------\n\nImport the the module\n\n```javascript\nvar analytics = require('forex.analytics');\n```\n\nor with ES6 modules syntax\n\n```javascript\nimport analytics from 'forex.analytics'\n```\nAnalytics object will give you several functions to use.\n\nfindStrategy(candlesticks, options, progressCallback)\n---------------\n\nFinds the optimal strategy for a certain period defined by the *candlesticks* array.\n\n**candlesticks** parameter should contain an array of objects representing one candlestick in OHLC chart.\n```javascript\n{\n  open: 1.113990,\n  high: 1.113990,\n  low: 1.113890,\n  close: 1.113890,\n  time: 1435701600\n}\n```\n\n**options** parameter lists several properties that influence the genetic algorithm\n```javascript\n{\n populationCount: 100,\n generationCount: 300,\n selectionAmount: 10,\n leafValueMutationProbability: 0.5,\n leafSignMutationProbability: 0.3,\n logicalNodeMutationProbability: 0.3,\n leafIndicatorMutationProbability: 0.2,\n crossoverProbability: 0.03,\n indicators: [ 'CCI', 'MACD', 'RSI', 'SMA15_SMA50' ],\n strategy: { buy : {...}, sell : {...} }\n}\n```\n\n**progressCallback** parameter has to be a function. This function is invoked when one generation passes.\n It contains three arguments: **strategy, fitness, generation**. Where **strategy** stands for the currently best\n strategy found in a certain generation. **Fitness** is a fitness value of a certain strategy calculated by fitness evaluation algorithm.\n **Generation** is the number of generation which was just completed. The **strategy** parameter describes which\n strategy it shall use as a referential. This parameter is not mandatory.\n\n ```javascript\n function progressCallback(strategy, fitness, generation) {\n   console.log('Fitness: ' + fitness + '; Generation: ' + generation);\n }\n ```\n\n could print\n\n ```\nFitness: 0.00010751596495091384; Generation: 285\n ```\n\nThe returning value is a promise which when it's resolved passes one argument with the best found strategy.\n\n**Full example:**\n```javascript\nanalytics.findStrategy(candlesticks, {\n  populationCount: 100,\n  generationCount: 300,\n  selectionAmount: 10,\n  leafValueMutationProbability: 0.5,\n  leafSignMutationProbability: 0.3,\n  logicalNodeMutationProbability: 0.3,\n  leafIndicatorMutationProbability: 0.2,\n  crossoverProbability: 0.03,\n  indicators: indicators\n\n}, function(strategy, fitness, generation) {\n  console.log('Fitness: ' + fitness + '; Generation: ' + generation);\n})\n.then(function(strategy) {\n  console.log('------------Strategy-------------')\n  console.log(strategy);\n});\n```\n\nThis could print something like:\n\n```\nFitness: 0.0; Generation: 1\n....\nFitness: 0.00010751596495091384; Generation: 297\nFitness: 0.00010751596495091384; Generation: 298\nFitness: 0.00010751596495091384; Generation: 299\nFitness: 0.00010751596495091384; Generation: 300\n------------Strategy-------------\n{\n   \"buy\":{\n      \"operator\":\"And\",\n      \"left\":{\n         \"operator\":\"Or\",\n         \"left\":{\n           \"indicator\":\"Momentum\",\n           \"sign\":\">\",\n           \"value\":-0.8390790893276773\n         },\n         \"right\":{\n           \"indicator\":\"RSI\",\n           \"sign\":\">\",\n           \"value\":74.22093161865811\n         }\n      },\n      \"right\":{\n         \"operator\":\"And\",\n         \"left\":{\n           \"indicator\":\"Momentum\",\n           \"sign\":\"<\",\n           \"value\":-0.6815039536729026\n         },\n         \"right\":{\n           \"indicator\":\"Momentum\",\n           \"sign\":\"<\",\n           \"value\":-0.32888175664540553\n         }\n      }\n   },\n   \"sell\":{\n      \"operator\":\"And\",\n      \"left\":{\n         \"operator\":\"Or\",\n         \"left\":{\n           \"indicator\":\"Momentum\",\n           \"sign\":\">\",\n           \"value\":-0.8390790893276773\n         },\n         \"right\":{\n           \"indicator\":\"RSI\",\n           \"sign\":\">\",\n           \"value\":74.22093161865811\n         }\n      },\n      \"right\":{\n         \"operator\":\"And\",\n         \"left\":{\n           \"indicator\":\"Momentum\",\n           \"sign\":\"<\",\n           \"value\":-0.6815039536729026\n         },\n         \"right\":{\n           \"indicator\":\"Momentum\",\n           \"sign\":\"<\",\n           \"value\":-0.32888175664540553\n         }\n      }\n   }\n}\n```\nconvertOHLC(candlesticks, targetTimeframe)\n---------------\nConverts OHLC data set to a larger timeframe\n(e.g. from 5 minute interval to 30 minute interval)\n\n**candlesticks** parameter should contain an array of objects representing one candlestick in OHLC chart.\n```javascript\n{\n  open: 1.113990,\n  high: 1.113990,\n  low: 1.113890,\n  close: 1.113890,\n  time: 1435701600\n}\n```\n\n**targetTimeframe** parameter defines the target interval in seconds\n\n**Example:**\n```javascript\n/**\n * Converts candlesticks from lower timeframe to 30 minute timeframe\n */\nfunction convertTo30MOhlc(candlesticks) {\n  return analytics.convertOHLC(candlesticks, 1800);\n}\n```\n\nThis function can be used for converting ticks to OHLC as well with a simple trick.\n\n```javascript\n/**\n * Converts ticks to one minute OHLC\n * Input could be for example: { time : 0, value : 1.225 },  { time : 10, value : 1.226 },\n *  { time : 20, value : 1.227 },  { time : 30, value : 1.228 }, ...\n */\nfunction ticksTo1MOhlc(ticks) {\n  return analytics.convertOHLC(candlesticks\n    .map(t => {\n      open: t.value,\n      high: t.value,\n      low: t.value,\n      close: t.value,\n      time: t.time\n    }), 60 /* one minute interval */);\n}\n```\n\ngetMarketStatus(candlesticks, options)\n---------------\n\nReturns suggestion whether to buy or sell current for the last candlestick in the\n**candlesticks** array passed in as a first parameter.\n\n**candlesticks** parameter should contain an array of objects representing one candlestick in OHLC chart.\n```javascript\n{\n  open: 1.113990,\n  high: 1.113990,\n  low: 1.113890,\n  close: 1.113890,\n  time: 1435701600\n}\n```\n\n**options** parameter lists one property\n```javascript\n{\n strategy: { buy : [...], sell : [...] }\n}\n```\n**strategy** is the result from the **findStrategy** function and defines when to buy and when to sell.\n\n**Example:**\n```javascript\nvar status = analytics.getMarketStatus(candlesticks, { strategy: strategy });\nconsole.log(status);\n```\nCan output:\n```\n{ shouldBuy: true, shouldSell: false }\n```\n\ngetTrades(candlesticks, options)\n---------------\n\nReturns an array of trades that were performed on a provided candlestick array\nwith given strategy\n**candlesticks** array passed in as a first parameter.\n\n**candlesticks** parameter should contain an array of objects representing one candlestick in OHLC chart.\n```javascript\n{\n  open: 1.113990,\n  high: 1.113990,\n  low: 1.113890,\n  close: 1.113890,\n  time: 1435701600\n}\n```\n\n**options** parameter lists one property\n```javascript\n{\n strategy: { buy : [...], sell : [...] }\n}\n```\n**strategy** is the result from the **findStrategy** function and defines when to buy and when to sell.\n\n**Example:**\n```javascript\nvar trades = analytics.getTrades(candlesticks, {\n  strategy: strategy\n});\nconsole.log(trades);\n```\n\nCan output:\n\n```\n[\n   {\n      \"Buy\":true,\n      \"Revenue\":0.0031200000000000117,\n      \"MaximumLoss\":0.0023200000000000998,\n      \"MaximumProfit\":0.005009999999999959,\n      \"ProfitBeforeLoss\" : true,\n      \"start\":{\n         \"open\":1.10604,\n         \"low\":1.10586,\n         \"high\":1.10762,\n         \"close\":1.10711,\n         \"time\":1435782600\n      },\n      \"end\":{\n         \"open\":1.10833,\n         \"low\":1.10833,\n         \"high\":1.11044,\n         \"close\":1.11023,\n         \"time\":1435824000\n      }\n   }\n]\n```\n\nWhere **buy** stands for whether the specific trade was made on a profit from a\nrising or falling market.\n\n**Revenue** is the the revenue that was obtained at the end of a trade.\n\n**MaximumLoss** describes how far the price movement went against the wanted direction.\n**MaximumProfit** describes how far the price movement went on the wanted direction.\n**start** and **end** are the candlesticks describing the boundaries of a given trade.\n**ProfitBeforeLoss** indicates whether the maximum profit was reached before maximum loss\n\nRoadmap\n---------------\n- [ ] Stabilize the solution / fix bugs\n- [ ] Make the algorithm more abstract (support for different kind of chromosomes and tree nodes)\n- [ ] Delegate indicator generation to a different library (perhaps use [node-talib](https://github.com/oransel/node-talib))\n- [ ] Implementing support for generating indicators (math formulas with OHLC as an input) based on successful trades\n- [ ] Think of more stuff to add. :)\n","starsCount":0,"created":"2016-03-06T20:15:08.954Z","modified":"2016-05-07T11:33:45.218Z","lastPublisher":{"name":"mkmarek","email":"marek.magdziak@hotmail.cz"},"owners":[{"name":"mkmarek","email":"marek.magdziak@hotmail.cz"}],"other":{"_attachments":{},"_from":".","_id":"forex.analytics","_nodeVersion":"5.7.1","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/forex.analytics-0.0.14.tgz_1462620822032_0.7416515124496073"},"_npmUser":{"name":"mkmarek","email":"marek.magdziak@hotmail.cz"},"_npmVersion":"3.8.6","_rev":"1-5f25b566d44dfcbf990e23b8f5f3d2ac","_shasum":"facc9c38dc2607ef6bb86c36e39da47af4db1a8e","author":{"name":"Marek Magdziak"},"bugs":{"url":"https://github.com/mkmarek/forex.analytics/issues"},"directories":{},"dist-tags":{"latest":"0.0.14"},"dist":{"shasum":"facc9c38dc2607ef6bb86c36e39da47af4db1a8e","tarball":"http://registry.npmjs.org/forex.analytics/-/forex.analytics-0.0.14.tgz"},"maintainers":[{"name":"mkmarek","email":"marek.magdziak@hotmail.cz"}],"readmeFilename":"README.md","time":{"modified":"2016-05-07T11:33:45.218Z","created":"2016-03-06T20:15:08.954Z","0.0.1":"2016-03-06T20:15:08.954Z","0.0.2":"2016-03-06T20:25:19.404Z","0.0.3":"2016-03-06T20:33:05.912Z","0.0.4":"2016-03-07T16:25:21.761Z","0.0.5":"2016-03-07T16:33:23.083Z","0.0.6":"2016-03-10T20:15:21.941Z","0.0.7":"2016-03-10T21:20:15.133Z","0.0.9":"2016-04-25T16:40:55.980Z","0.0.10":"2016-04-28T16:36:49.849Z","0.0.11":"2016-04-28T17:02:53.294Z","0.0.12":"2016-04-28T17:32:28.799Z","0.0.13":"2016-04-28T20:07:22.668Z","0.0.14":"2016-05-07T11:33:45.218Z"},"users":{}}}